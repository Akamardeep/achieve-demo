import{a as L,b as Ce,c as ze}from"./chunk-UNSHYGIW.js";import{a as _e}from"./chunk-TORHZTRP.js";import{a as he}from"./chunk-GNIRA6UU.js";import{a as be}from"./chunk-YOJF7PYN.js";import{a as Z,b as $}from"./chunk-TIRIUDSN.js";import{A as Ie,B as S,C as H,E as ce,G as K,H as J,I as Ke,J as De,K as Te,L as Ve,N as Re,O as E,P as le,a as Ee,aa as de,ba as pe,ca as ge,da as me,ea as ue,fa as fe,ha as G,ia as Ne,ja as Ge,ka as Be,la as Ae,ma as Le,na as Fe,oa as We,pa as je,va as qe,w as U,x as A,y as Y,z as N}from"./chunk-3NBVBNCQ.js";import{$b as T,Aa as ie,Cb as b,Dc as X,Eb as _,Ec as se,Fb as p,Fc as R,Kb as j,Kc as k,Lb as q,Mb as z,Nb as V,Ob as l,Pb as B,Qb as te,Sb as w,Tb as P,Ub as x,Wa as c,Wb as O,Xa as f,Xb as Q,Yb as Se,Z as ye,ca as Oe,da as W,ia as y,lb as C,nb as d,ob as D,ra as ke,sa as g,ta as m,tb as oe,vb as re,wb as ae,xb as s,yb as r,zb as h}from"./chunk-C6LWXFOC.js";var I=(()=>{let a=class a{constructor(t){this.http=t}getKraList(){return this.http.get(U.KRA_LISTS_API)}addKraList(t){return this.http.post(U.ADD_KRA_API,t)}updateKraListById(t,e){let n=U.UPDATE_KRA_LIST_API+e.toString();return this.http.put(n,t)}deleteKraListById(t){let e=U.DELETE_KRA_LIST_API+t.toString();return this.http.delete(e,{responseType:"text"})}getKraById(t){let e="http://achieve-api-dev.powerhcmdev.io/v1/kra/"+t.toString();return this.http.get(e)}getConfiguration(t){let e=`${U.CONFIGURATION_API}${t}`;return this.http.get(e)}};a.\u0275fac=function(e){return new(e||a)(Oe(Ee))},a.\u0275prov=ye({token:a,factory:a.\u0275fac,providedIn:"root"});let i=a;return i})();function et(i,a){if(i&1){let o=b();s(0,"div",15)(1,"h6",16),l(2,"Update KRA"),r()(),s(3,"div",17)(4,"form",18,1)(6,"input",19,2),x("ngModelChange",function(e){g(o);let n=p(2);return P(n.kraTitle,e)||(n.kraTitle=e),m(e)}),r(),s(8,"textarea",20,3),x("ngModelChange",function(e){g(o);let n=p(2);return P(n.kraDescription,e)||(n.kraDescription=e),m(e)}),r()()(),s(10,"div",21)(11,"button",22),_("click",function(){let e=g(o).$implicit;return m(e.close("Close click"))}),l(12,"Close"),r(),s(13,"button",23),_("click",function(){g(o);let e=p().$implicit,n=p();return m(n.save(e))}),l(14,"Save"),r()()}if(i&2){let o=p(2);c(6),w("ngModel",o.kraTitle),c(2),w("ngModel",o.kraDescription)}}function tt(i,a){if(i&1){let o=b();s(0,"div",5)(1,"div",6)(2,"div",7)(3,"h6",8),l(4),s(5,"div",9),h(6,"i",10),s(7,"div",11),C(8,et,15,2,"ng-template",null,0,T),s(10,"button",12),_("click",function(){let e=g(o).$index,n=V(9),u=p();return m(u.openVerticallyCentered(n,e))}),h(11,"i",13),l(12," Edit"),r()()()(),s(13,"p",14),l(14),r()()()()}if(i&2){let o=a.$implicit;c(4),te("",o.title," "),c(10),B(o.description?o.description:"No Description Avaliable")}}var Qe=(()=>{let a=class a{constructor(t,e){this.settingsService=t,this.sharedService=e,this.kraId=0,this.createdBy=0,this.kraLists=[],this.kraTitle="",this.kraDescription="",this.kraList=[],this.modalService=W(G)}ngOnInit(){this.settingsService.getKraList().subscribe({next:t=>{t.length&&(this.kraLists=t)}})}save(t){if(this.kraTitle){let e={title:this.kraTitle,description:this.kraDescription,createdBy:t.createdBy};this.settingsService.updateKraListById(e,t.kraId).subscribe(n=>{let u={title:"successful",description:"KRA updated successfully",svg:"tick",alert:"alert-success"};this.sharedService.setNotificationData(u),t.title=this.kraTitle,t.description=this.kraDescription})}this.modalService.dismissAll()}openVerticallyCentered(t,e){this.kraTitle=this.kraList[e].title,this.kraDescription=this.kraList[e].description,this.modalService.open(t,{centered:!0})}delete(t){this.settingsService.deleteKraListById(t.kraId).subscribe(()=>{this.settingsService.getKraList().subscribe({next:e=>{this.kraList=e;let n={title:"successful",description:"KRA deleted successfully",svg:"dustbin",alert:"alert-delete"};this.sharedService.setNotificationData(n)}})})}};a.\u0275fac=function(e){return new(e||a)(f(I),f(_e))},a.\u0275cmp=y({type:a,selectors:[["app-kra-list"]],inputs:{kraList:"kraList"},standalone:!0,features:[O],decls:3,vars:0,consts:[["content",""],["updateForm","ngForm"],["titleField","ngModel"],["descriptionField","ngModel"],[1,"row","my-2","kra-list-row"],[1,"col-6","my-2"],[1,"card"],[1,"card-body","my-1"],[1,"card-title","d-flex","justify-content-between"],["ngbDropdown","","ngbDropdownToggle","",1,"d-inline-block","hide-arrow"],[1,"bi","bi-three-dots-vertical"],["ngbDropdownMenu","","aria-labelledby","dropdownOptions",1,"dropdown-menu-left"],["ngbDropdownItem","",1,"dropdown-item","d-flex","gap-4",3,"click"],[1,"bi","bi-pencil-square"],[1,"card-text"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"d-flex","flex-column","gap-3"],["type","text","name","kra-title","id","kra-title","placeholder","Write your KRA*",1,"form-control","kra-title",3,"ngModelChange","ngModel"],["type","text","name","kra-description","id","kra-description","placeholder","Write your KRA description here (Optional)",1,"form-control","kra-description",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","close","btn-secondary",3,"click"],["type","button",1,"btn","save","btn-secondary",3,"click"]],template:function(e,n){e&1&&(s(0,"div",4),re(1,tt,15,2,"div",5,oe),r()),e&2&&(c(),ae(n.kraList))},dependencies:[E,J,N,S,H,K,ce,fe,ue,me,ge,de,pe],styles:[".card[_ngcontent-%COMP%]{border:none;box-shadow:0 0 4px #1414144d}.card[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.card[_ngcontent-%COMP%]   .bi-three-dots-vertical[_ngcontent-%COMP%]{cursor:pointer}.card[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{border:none;box-shadow:0 0 4px #1414144d}.card[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{height:37px;cursor:pointer;display:flex;align-items:center}.card[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#fffaf0}.card[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:focus{color:#000;background-color:#ddd}.card[_ngcontent-%COMP%]   .dropdown-menu-left[_ngcontent-%COMP%]{right:0}.modal-title[_ngcontent-%COMP%]{font-weight:400}.modal-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{position:relative;border:none;border-radius:5px;background-color:#f4f4f4;text-align:start;padding:10px}.modal-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .modal-body[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{position:absolute;top:10px;text-align:start;color:#cdcdcd}.modal-body[_ngcontent-%COMP%]   textarea.kra-description[_ngcontent-%COMP%]{height:100px}.btn-secondary[_ngcontent-%COMP%]{border-radius:5px;color:#442400}.save[_ngcontent-%COMP%]{background-color:#ffcb56;border:none}.close[_ngcontent-%COMP%]{background-color:#fff;border:solid 1px #442400}.kra-list-row[_ngcontent-%COMP%]{margin:0 -22px}"]});let i=a;return i})();var it=["kraConfirmationPopup"],ot=i=>({disabled:i});function rt(i,a){i&1&&(s(0,"p",9),l(1,"You don't have permission to edit the KRA settings"),r())}function at(i,a){if(i&1){let o=b();s(0,"div",20)(1,"h6",21),l(2,"Add KRA"),r()(),s(3,"div",22)(4,"form",23)(5,"input",24),x("ngModelChange",function(e){g(o);let n=p(2);return P(n.kraTitle,e)||(n.kraTitle=e),m(e)}),r(),s(6,"textarea",25),x("ngModelChange",function(e){g(o);let n=p(2);return P(n.kraDescription,e)||(n.kraDescription=e),m(e)}),r()()(),s(7,"div",26)(8,"button",27),_("click",function(){let e=g(o).$implicit;return p(2).resetModal(),m(e.close("Close click"))}),l(9,"Close"),r(),s(10,"button",28),_("click",function(){g(o);let e=p(2);return m(e.save())}),l(11,"Save"),r()()}if(i&2){let o=p(2);c(5),w("ngModel",o.kraTitle),c(),w("ngModel",o.kraDescription)}}function st(i,a){if(i&1&&h(0,"app-kra-list",29),i&2){let o=p(2);d("kraList",o.originalKraList)}}function ct(i,a){i&1&&(s(0,"div",30)(1,"div",31),h(2,"i",32),r(),s(3,"div",33),l(4," No KRA found "),r()())}function lt(i,a){if(i&1){let o=b();s(0,"div",10)(1,"div",11)(2,"div",12)(3,"input",13),x("ngModelChange",function(e){g(o);let n=p();return P(n.searchTerm,e)||(n.searchTerm=e),m(e)}),_("input",function(){g(o);let e=p();return m(e.onSearchChange())}),r()(),s(4,"div",14),C(5,at,12,2,"ng-template",null,1,T),s(7,"button",15),_("click",function(){g(o);let e=V(6),n=p();return m(n.openVerticallyCentered(e))}),h(8,"i",16),l(9," Add KRA "),r()()(),s(10,"div",17),C(11,st,1,1,"app-kra-list",18),r(),C(12,ct,5,0,"div",19),r()}if(i&2){let o=p();c(3),w("ngModel",o.searchTerm),c(4),d("disabled",!o.permissions.includes("EDIT_SETTINGS")),c(3),d("ngClass",Q(5,ot,!o.permissions.includes("EDIT_SETTINGS"))),c(),d("ngIf",o.kraList.length),c(),d("ngIf",!o.kraList.length)}}function dt(i,a){i&1&&(s(0,"p",39),l(1,"If you disable the KRA, Goals will be enabled automatically."),r())}function pt(i,a){if(i&1){let o=b();s(0,"div",20)(1,"h2",34),l(2,"Are you sure?"),r()(),s(3,"div",22)(4,"p"),l(5,"You are disabling KRA for entire organization"),r(),C(6,dt,2,0,"p",35),r(),s(7,"div",36)(8,"button",37),_("click",function(){let e=g(o).dismiss,n=p();return m(e(n.resetValues()))}),l(9," Close "),r(),s(10,"button",38),_("click",function(){let e=g(o).close,n=p();return m(e(n.onEnableChange()))}),l(11,"Confirm"),r()()}if(i&2){let o=p();c(6),d("ngIf",!o.isGoalEnabled)}}var Xe=(()=>{let a=class a{constructor(t,e,n,u){this.settingsService=t,this.authService=e,this.configurationService=n,this.sharedService=u,this.userDetails={},this.kraTitle="",this.kraDescription="",this.kraList=[],this.originalKraList=[],this.configuration=[],this.isKraEnabled=!0,this.isGoalEnabled=!0,this.configurationId="",this.organizationId="",this.searchTerm="",this.triggerNotification=new ie,this.modalService=W(G)}ngOnInit(){this.settingsService.getKraList().subscribe({next:e=>{e.length&&(this.originalKraList=e,this.kraList=e)}}),this.userDetails=this.authService.userInfo();let t=this.userDetails.orgId;this.settingsService.getConfiguration(t).subscribe(e=>{this.configurationId=e.configurationId,this.isKraEnabled=e.isKraEnabled,this.organizationId=e.organizationId,this.isGoalEnabled=e.isGoalEnabled})}save(){if(this.kraTitle){let t={title:this.kraTitle,description:this.kraDescription,createdBy:this.organizationId};this.settingsService.addKraList(t).subscribe(e=>{this.originalKraList.push(e);let n={title:"successful",description:"KRA added successfully",svg:"tick",alert:"alert-success"};this.triggerNotification.emit(n)})}this.resetModal(),this.modalService.dismissAll()}openVerticallyCentered(t){this.modalService.open(t,{centered:!0}).result.finally(()=>{this.resetModal()})}resetModal(){this.kraTitle="",this.kraDescription=""}resetValues(){this.isKraEnabled=!this.isKraEnabled}openConformatioPopup(){this.isKraEnabled?this.onEnableChange():this.modalService.open(this.kraConfirmationPopup,{centered:!0,backdrop:"static",keyboard:!1})}onEnableChange(){!this.isGoalEnabled&&!this.isKraEnabled&&(this.isGoalEnabled=!0);let t={isKraEnabled:this.isKraEnabled};this.configurationService.updateConfiguration(this.organizationId,t).subscribe(e=>{this.sharedService.sideNavItemsVisible()})}onSearchChange(){if(!this.searchTerm.trim()){this.originalKraList=[...this.kraList];return}this.originalKraList=this.kraList.filter(t=>t.title.toLowerCase().includes(this.searchTerm.toLowerCase()))}};a.\u0275fac=function(e){return new(e||a)(f(I),f(A),f(L),f(he))},a.\u0275cmp=y({type:a,selectors:[["app-kra"]],viewQuery:function(e,n){if(e&1&&j(it,5),e&2){let u;q(u=z())&&(n.kraConfirmationPopup=u.first)}},inputs:{permissions:"permissions"},outputs:{triggerNotification:"triggerNotification"},standalone:!0,features:[O],decls:11,vars:6,consts:[["kraConfirmationPopup",""],["content",""],["class","message mt-3",4,"ngIf"],[1,"kra-container"],[1,"d-flex","align-items-center","gap-2","my-4"],[1,"switch"],["type","checkbox",3,"ngModelChange","ngModel","disabled"],[1,"slider","round"],["class","row row-filter",4,"ngIf"],[1,"message","mt-3"],[1,"row","row-filter"],[1,"util-container","justify-content-between"],[1,"col-md-10"],["type","text","id","search_settings","placeholder","Search",1,"form-control","search",2,"background-image","url(./assets/search.svg)",3,"ngModelChange","input","ngModel"],[1,"col-md-2","add-button"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"bi","bi-plus-square"],[3,"ngClass"],[3,"kraList",4,"ngIf"],["class","row row-margin",4,"ngIf"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"d-flex","flex-column","gap-3"],["type","text","name","kra-title","id","kra-title","placeholder","Write your KRA*",1,"form-control","kra-title",3,"ngModelChange","ngModel"],["type","text","name","kra-discription","id","kra-discription","placeholder","Write your KRA description here (Optional)",1,"form-control","kra-discription",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button",1,"btn","close","btn-secondary",3,"click"],["type","button",1,"btn","save","btn-secondary",3,"click"],[3,"kraList"],[1,"row","row-margin"],[1,"no-settings-icon"],[1,"bi","bi-folder-fill"],[1,"no-settings-msg"],["id","modalCancelToolAdditionLabel",1,"modal-title","fs-5"],["class","m-0",4,"ngIf"],[1,"modal-footer","p-2"],["type","button","data-bs-dismiss","modal",1,"btn","close","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"m-0"]],template:function(e,n){if(e&1){let u=b();C(0,rt,2,0,"p",2),s(1,"div",3)(2,"div",4)(3,"p"),l(4,"Enable KRA for the organization"),r(),s(5,"label",5)(6,"input",6),x("ngModelChange",function(v){return g(u),P(n.isKraEnabled,v)||(n.isKraEnabled=v),m(v)}),_("ngModelChange",function(){return g(u),m(n.openConformatioPopup())}),r(),h(7,"span",7),r()(),C(8,lt,13,7,"div",8),r(),C(9,pt,12,1,"ng-template",null,0,T)}e&2&&(d("ngIf",!n.permissions.includes("EDIT_SETTINGS")),c(5),D("opacity",n.permissions.includes("EDIT_SETTINGS")?"1":"0.5"),c(),w("ngModel",n.isKraEnabled),d("disabled",!n.permissions.includes("EDIT_SETTINGS")),c(2),d("ngIf",n.isKraEnabled))},dependencies:[E,J,N,Y,S,H,K,ce,k,X,R,Qe],styles:['.kra-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#444;margin-bottom:0}.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]{padding:0 12px}.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]{display:contents}.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:440px;height:48px;transition:background-color .3s ease}@media screen and (max-width: 430px){.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:329px;margin-left:10px}}.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover, .kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background-color:#f8f9fa}.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .filter-settings[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-left:35px}.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .filter-settings[_ngcontent-%COMP%]   .bi-funnel[_ngcontent-%COMP%]{align-self:center;width:48px}.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .filter-settings[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:4px;cursor:pointer;background-color:#fffaf0;border:solid 1px #fff1d6}@media screen and (max-width: 430px){.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .filter-settings[_ngcontent-%COMP%]{margin-left:20px;margin-right:0}}@media screen and (min-width: 768px) and (max-width: 1024px){.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .filter-settings[_ngcontent-%COMP%]{margin-left:20px}}@media screen and (min-width: 1025px) and (max-width: 1365px){.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .filter-settings[_ngcontent-%COMP%]{margin-left:70px}}.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{white-space:nowrap;display:flex;justify-content:flex-end}@media screen and (max-width: 430px){.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{margin-left:20px;margin-right:0}}@media screen and (min-width: 768px) and (max-width: 1024px){.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{margin-left:20px}}@media screen and (min-width: 1025px) and (max-width: 1365px){.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{margin-left:70px}}.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   .bi-plus-square[_ngcontent-%COMP%]{padding-right:5px}.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:after{content:"";background:#755302;display:block;position:absolute;bottom:0;left:0;padding-top:45%;padding-left:110%;opacity:0;border-radius:5px;transition:all .4s}.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active:after{border-color:#ffcb56;padding:0;margin:0;opacity:1;transition:0s}.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{position:relative;background-color:#ffcb56;border-color:#ffcb56;color:#442400;overflow:hidden}.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:48px}@media screen and (max-width: 430px){.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:18px;margin-left:43px;width:398px}}@media screen and (min-width: 768px) and (max-width: 1024px){.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:-15px}}@media screen and (min-width: 1025px) and (max-width: 1365px){.kra-container[_ngcontent-%COMP%]   .row-filter[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{margin-left:-70px}}.kra-container[_ngcontent-%COMP%]   .row-margin[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:281px;flex-grow:0;margin:20px 0;border:solid 1px #dee2e6}.kra-container[_ngcontent-%COMP%]   .no-settings-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:157px;height:157px;flex-grow:0;border:solid 1px #f0f0f0;background-color:#f8f9fa;border-radius:50%;margin:0 0 -75px}.kra-container[_ngcontent-%COMP%]   .no-settings-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:5em;color:#e9ecef}.kra-container[_ngcontent-%COMP%]   .no-settings-msg[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-weight:500;color:#adb5bd}.kra-container[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{padding:9px 4px 9px 40px;background:transparent no-repeat 13px}.kra-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:32px;height:18px}.kra-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.kra-container[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;-webkit-transition:.4s;transition:.4s}.kra-container[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:14px;width:14px;left:2px;bottom:2px;background-color:#fff;-webkit-transition:.4s;transition:.4s}.kra-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffa401,#d76700)}.kra-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #442400}.kra-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{-webkit-transform:translateX(14px);-ms-transform:translateX(14px);transform:translate(14px)}.kra-container[_ngcontent-%COMP%]   .slider.round[_ngcontent-%COMP%]{border-radius:36px}.kra-container[_ngcontent-%COMP%]   .slider.round[_ngcontent-%COMP%]:before{border-radius:50%}.modal-title[_ngcontent-%COMP%]{font-weight:400}.modal-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{position:relative;border:none;border-radius:5px;background-color:#f4f4f4;text-align:start;padding:10px}.modal-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .modal-body[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{position:absolute;top:10px;text-align:start;color:#cdcdcd}.modal-body[_ngcontent-%COMP%]   textarea.kra-discription[_ngcontent-%COMP%]{height:100px}.btn-secondary[_ngcontent-%COMP%]{border-radius:5px;color:#442400}.save[_ngcontent-%COMP%]{background-color:#ffcb56;border:none}.close[_ngcontent-%COMP%]{background-color:#fff;border:solid 1px #442400}.btn-primary[_ngcontent-%COMP%]{background-color:#ffcb56;border-color:#ffcb56;color:#442400}.btn.close.btn-secondary[_ngcontent-%COMP%]{background:none;color:#fff;border-color:#442400;color:#442400;margin-right:10px}p.message[_ngcontent-%COMP%]{font-size:14px;font-weight:300;color:#444;width:fit-content;padding:4px 15px;border:1px solid #442400;background-color:#fffaf0;border-radius:30px}.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}']});let i=a;return i})();var gt=["goalsConfirmationPopup"];function mt(i,a){i&1&&(s(0,"p",7),l(1,"You don't have permission to edit the goal settings"),r())}function ut(i,a){i&1&&(s(0,"p",15),l(1,"If you disable the Goals, KRA will be enabled automatically."),r())}function ft(i,a){if(i&1){let o=b();s(0,"div",8)(1,"h2",9),l(2,"Are you sure?"),r()(),s(3,"div",10)(4,"p"),l(5,"You are disabling Goals for entire organization"),r(),C(6,ut,2,0,"p",11),r(),s(7,"div",12)(8,"button",13),_("click",function(){let e=g(o).dismiss,n=p();return m(e(n.resetValues()))}),l(9," Close "),r(),s(10,"button",14),_("click",function(){let e=g(o).close,n=p();return m(e(n.onEnableChange()))}),l(11,"Confirm"),r()()}if(i&2){let o=p();c(6),d("ngIf",!o.isKraEnable)}}var Ue=(()=>{let a=class a{constructor(t,e,n,u,M){this.settingsService=t,this.authService=e,this.configurationService=n,this.sharedService=u,this.modalService=M,this.isGoalEnable=!0,this.isKraEnable=!0,this.userDetails={},this.configurationId="",this.orgId=""}ngOnInit(){this.userDetails=this.authService.userInfo(),this.orgId=this.userDetails.orgId,this.settingsService.getConfiguration(this.orgId).subscribe(t=>{this.configurationId=t.configurationId,this.isGoalEnable=t.isGoalEnabled,this.isKraEnable=t.isKraEnabled})}openConformatioPopup(){this.isGoalEnable?this.onEnableChange():this.modalService.open(this.goalsConfirmationPopup,{centered:!0,backdrop:"static",keyboard:!1})}resetValues(){this.isGoalEnable=!this.isGoalEnable}onEnableChange(){!this.isGoalEnable&&!this.isKraEnable&&(this.isKraEnable=!0);let t={isGoalEnabled:this.isGoalEnable};this.configurationService.updateConfiguration(this.orgId,t).subscribe(e=>{this.sharedService.sideNavItemsVisible()})}};a.\u0275fac=function(e){return new(e||a)(f(I),f(A),f(L),f(he),f(G))},a.\u0275cmp=y({type:a,selectors:[["app-goals"]],viewQuery:function(e,n){if(e&1&&j(gt,5),e&2){let u;q(u=z())&&(n.goalsConfirmationPopup=u.first)}},inputs:{permissions:"permissions"},standalone:!0,features:[O],decls:10,vars:5,consts:[["goalsConfirmationPopup",""],["class","message mt-3",4,"ngIf"],[1,"goals-container"],[1,"d-flex","align-items-center","gap-2","my-4"],[1,"switch"],["type","checkbox",3,"ngModelChange","ngModel","disabled"],[1,"slider","round"],[1,"message","mt-3"],[1,"modal-header"],["id","modalCancelToolAdditionLabel",1,"modal-title","fs-5"],[1,"modal-body"],["class","m-0",4,"ngIf"],[1,"modal-footer","p-2"],["type","button","data-bs-dismiss","modal",1,"btn","close","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"m-0"]],template:function(e,n){if(e&1){let u=b();C(0,mt,2,0,"p",1),s(1,"div",2)(2,"div",3)(3,"p"),l(4,"Enable goals for the organization"),r(),s(5,"label",4)(6,"input",5),x("ngModelChange",function(v){return g(u),P(n.isGoalEnable,v)||(n.isGoalEnable=v),m(v)}),_("ngModelChange",function(){return g(u),m(n.openConformatioPopup())}),r(),h(7,"span",6),r()()(),C(8,ft,12,1,"ng-template",null,0,T)}e&2&&(d("ngIf",!n.permissions.includes("EDIT_SETTINGS")),c(5),D("opacity",n.permissions.includes("EDIT_SETTINGS")?"1":"0.5"),c(),w("ngModel",n.isGoalEnable),d("disabled",!n.permissions.includes("EDIT_SETTINGS")))},dependencies:[E,Y,S,K,k,R],styles:['.goals-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#444;margin-bottom:0}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:32px;height:18px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;-webkit-transition:.4s;transition:.4s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:14px;width:14px;left:2px;bottom:2px;background-color:#fff;-webkit-transition:.4s;transition:.4s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffa401,#d76700)}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #442400}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{-webkit-transform:translateX(14px);-ms-transform:translateX(14px);transform:translate(14px)}.slider.round[_ngcontent-%COMP%]{border-radius:36px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}.btn-primary[_ngcontent-%COMP%]{background-color:#ffcb56;border-color:#ffcb56;color:#442400}.btn.close.btn-secondary[_ngcontent-%COMP%]{background:none;color:#fff;border-color:#442400;color:#442400;margin-right:10px}p.message[_ngcontent-%COMP%]{font-size:14px;font-weight:300;color:#444;width:fit-content;padding:4px 15px;border:1px solid #442400;background-color:#fffaf0;border-radius:30px}']});let i=a;return i})();function _t(i,a){i&1&&(s(0,"p",7),l(1,"You don't have permission to edit the General settings"),r())}function ht(i,a){i&1&&(s(0,"p",8),l(1,"This setting can be enabled only when both KRA and Goal are enabled too"),r())}var Ye=(()=>{let a=class a{constructor(t,e,n){this.settingsService=t,this.authService=e,this.configurationService=n,this.isGoalVsKRAEnabled=!0,this.userDetails={},this.configurationId="",this.orgId="",this.isGoalEnable=!0,this.isKraEnable=!0,this.disable=!0}ngOnInit(){this.userDetails=this.authService.userInfo(),this.orgId=this.userDetails.orgId,this.settingsService.getConfiguration(this.orgId).subscribe(t=>{this.isGoalEnable=t.isGoalEnabled,this.isKraEnable=t.isKraEnabled,this.isGoalVsKRAEnabled=t.isGoalVsKRAEnabled,this.configurationId=t.configurationId,this.isGoalEnable&&this.isKraEnable||(this.disable=!1)})}onEnableChange(t){let e={isGoalEnabled:this.isGoalEnable,isKraEnabled:this.isKraEnable,isGoalVsKRAEnabled:this.isGoalVsKRAEnabled};this.configurationService.updateConfiguration(this.orgId,e).subscribe(n=>{console.log("Sucessfully updated")})}};a.\u0275fac=function(e){return new(e||a)(f(I),f(A),f(L))},a.\u0275cmp=y({type:a,selectors:[["app-general"]],inputs:{permissions:"permissions"},standalone:!0,features:[O],decls:9,vars:7,consts:[["class","message mt-3",4,"ngIf"],[1,"general-container"],[1,"d-flex","align-items-center","gap-2","my-4"],[1,"switch"],["type","checkbox",3,"ngModelChange","ngModel","disabled"],[1,"slider","round"],["class","message",4,"ngIf"],[1,"message","mt-3"],[1,"message"]],template:function(e,n){e&1&&(C(0,_t,2,0,"p",0),s(1,"div",1)(2,"div",2)(3,"p"),l(4,"Enable goal vs KRA mapping"),r(),s(5,"label",3)(6,"input",4),x("ngModelChange",function(M){return P(n.isGoalVsKRAEnabled,M)||(n.isGoalVsKRAEnabled=M),M}),_("ngModelChange",function(M){return n.onEnableChange(M)}),r(),h(7,"span",5),r()(),C(8,ht,2,0,"p",6),r()),e&2&&(d("ngIf",!n.permissions.includes("EDIT_SETTINGS")),c(5),D("opacity",n.permissions.includes("EDIT_SETTINGS")?"1":"0.5"),c(),w("ngModel",n.isGoalVsKRAEnabled),d("disabled",!n.disable)("disabled",!n.permissions.includes("EDIT_SETTINGS")),c(2),d("ngIf",n.permissions.includes("EDIT_SETTINGS")))},dependencies:[E,Y,S,K,k,R],styles:['p.message[_ngcontent-%COMP%]{font-size:14px;font-weight:300;color:#444;width:fit-content;padding:4px 15px;border:1px solid #442400;background-color:#fffaf0;border-radius:30px}.general-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#444;margin-bottom:0}.general-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:32px;height:18px}.general-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.general-container[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;-webkit-transition:.4s;transition:.4s}.general-container[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:14px;width:14px;left:2px;bottom:2px;background-color:#fff;-webkit-transition:.4s;transition:.4s}.general-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background:linear-gradient(to right,#ffa401,#d76700)}.general-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #442400}.general-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{-webkit-transform:translateX(14px);-ms-transform:translateX(14px);transform:translate(14px)}.general-container[_ngcontent-%COMP%]   .slider.round[_ngcontent-%COMP%]{border-radius:36px}.general-container[_ngcontent-%COMP%]   .slider.round[_ngcontent-%COMP%]:before{border-radius:50%}']});let i=a;return i})();var Mt=i=>({disabled:i});function vt(i,a){if(i&1){let o=b();s(0,"li",12)(1,"div",2)(2,"div",13),l(3),r()(),s(4,"div",14)(5,"input",15),x("ngModelChange",function(e){let n=g(o).$implicit;return P(n.weightage,e)||(n.weightage=e),m(e)}),r(),s(6,"button",16),_("click",function(){let e=g(o).index,n=p();return m(n.deleteKra(e))}),r()()()}if(i&2){let o=a.$implicit,t=p();c(3),B(o.kra.title),c(),d("ngClass",Q(3,Mt,t.editPermission)),c(),w("ngModel",o.weightage)}}var xe=(()=>{let a=class a{constructor(t,e,n){this.designationKraService=t,this.kraService=e,this.notificationService=n,this.searchTerm="",this.alertProperties={},this.kraData=[],this.designationChange=new ie}ngOnChanges(t){this.notificationService.notification$.subscribe(e=>{this.alertProperties=e}),this.search()}search(){this.searchTerm!==""?this.allKraData=this.kraData.filter(t=>t.kra.title&&t.kra.title.toLowerCase().includes(this.searchTerm.toLowerCase())):this.allKraData=this.kraData}deleteKra(t){this.kraService.deleteKra(this.kraData[t].designationKRAMappingId).subscribe(e=>{this.kraData.splice(t,1),this.notificationService.showNotification("Successful","KRA has been deleted successfully","dustbin","alert-delete")})}saveKra(){let t=0;if(this.kraData.forEach(n=>{t+=parseInt(n.weightage)}),t!==100){this.notificationService.showNotification("Warning!","Total Weightage must be equal to 100","warning","alert-warning");return}let e=this.kraData.map(n=>({designationKRAMappingId:n.designationKRAMappingId,weightage:n.weightage}));this.kraService.updateKra(e).subscribe({next:n=>{this.notificationService.showNotification("Successful","KRA Saved successfully","tick","alert-success")},error:n=>{console.error("Error ",n)}})}};a.\u0275fac=function(e){return new(e||a)(f(Ce),f(be),f($))},a.\u0275cmp=y({type:a,selectors:[["app-select-kra"]],inputs:{kraData:"kraData",editPermission:"editPermission"},outputs:{designationChange:"designationChange"},standalone:!0,features:[ke,O],decls:13,vars:7,consts:[[1,"border","select-kra-panel"],[1,"row","m-0","border-btm"],[1,"col-md-6","p-0"],[1,"kra-search-container"],["type","text","placeholder","Search",1,"form-control","search-input",2,"background-image","url(./assets/search.svg)",3,"ngModelChange","keyup","ngModel"],[1,"col-md-3","p-0","offset-md-3","col-sm-2","offset-sm-2"],[1,"header-label"],[1,"row","m-0"],[1,"col-md-12","p-0"],[1,"kra-list"],["class","list-item row m-0",4,"ngFor","ngForOf"],[3,"alertClass","title","message","isVisible","svgType"],[1,"list-item","row","m-0"],[1,""],[1,"col-md-3","p-0","offset-md-3","col-sm-2","offset-sm-2","d-flex","align-items-center",3,"ngClass"],["type","number","max","100",1,"weightage-input",3,"ngModelChange","ngModel"],[1,"del-weightage",2,"background-image","url(./assets/trash.svg)",3,"click"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),x("ngModelChange",function(M){return P(n.searchTerm,M)||(n.searchTerm=M),M}),_("keyup",function(){return n.search()}),r()()(),s(5,"div",5)(6,"h4",6),l(7,"Weightage"),r()()(),s(8,"div",7)(9,"div",8)(10,"ul",9),C(11,vt,7,5,"li",10),r()()()(),h(12,"app-notification-alert",11)),e&2&&(c(4),w("ngModel",n.searchTerm),c(7),d("ngForOf",n.allKraData),c(),d("alertClass",n.alertProperties.alertClass)("title",n.alertProperties.title)("message",n.alertProperties.message)("isVisible",n.alertProperties.isVisible)("svgType",n.alertProperties.svgType))},dependencies:[E,N,Ke,S,Ve,K,k,X,se,le,Z],styles:[".select-kra-panel[_ngcontent-%COMP%]{height:100%}.select-kra-panel[_ngcontent-%COMP%]   .border-btm[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}.select-kra-panel[_ngcontent-%COMP%]   .kra-search-container[_ngcontent-%COMP%]{padding:16px}.select-kra-panel[_ngcontent-%COMP%]   .kra-search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{background:transparent no-repeat 13px;padding:9px 4px 9px 40px;height:50px;margin:0;width:100%}.select-kra-panel[_ngcontent-%COMP%]   .header-label[_ngcontent-%COMP%]{color:#000;font-size:18px;font-weight:400;margin-top:30px}.select-kra-panel[_ngcontent-%COMP%]   .kra-list[_ngcontent-%COMP%]{padding:0;list-style:none}.select-kra-panel[_ngcontent-%COMP%]   .kra-list[_ngcontent-%COMP%]   li.list-item[_ngcontent-%COMP%]{padding:7px;align-items:center}.select-kra-panel[_ngcontent-%COMP%]   .kra-list[_ngcontent-%COMP%]   li.list-item[_ngcontent-%COMP%]   .col-md-3[_ngcontent-%COMP%]{padding-left:35px!important}.select-kra-panel[_ngcontent-%COMP%]   .weightage-input[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;display:inline-block;height:40px;padding:5px;width:40px;text-align:center}.search[_ngcontent-%COMP%]{padding:9px 4px 9px 40px;background:transparent no-repeat 13px}.search-container[_ngcontent-%COMP%]{margin-top:10px;margin-left:12px}.search-input[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px}.del-weightage[_ngcontent-%COMP%]{margin-left:34px;height:23px;width:26px;background-color:#f8f9ff;border:none}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;background-color:#f8f8f8;margin:0}li[_ngcontent-%COMP%]{margin-bottom:10px}.wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between}input[type=checkbox][_ngcontent-%COMP%]{transform:scale(1.2)}.weightage-input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .weightage-input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.weightage-input[_ngcontent-%COMP%]{-moz-appearance:textfield}.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}"]});let i=a;return i})();var wt=(i,a,o)=>({"mb-3":i,"mb-0":a,"border-bottom-0":o}),Pt=i=>({"mt-3":i});function xt(i,a){i&1&&(s(0,"p",23),l(1,"You don't have permission to edit the Designation vs KRA settings"),r())}function yt(i,a){if(i&1){let o=b();s(0,"button",24),_("click",function(){let e=g(o).$implicit,n=p();return m(n.handleSelectDepartment(e.department_id))}),l(1),r()}if(i&2){let o=a.$implicit;c(),B(o.department_name)}}function Ot(i,a){if(i&1){let o=b();s(0,"li",39),_("click",function(){let e=g(o).$implicit,n=p(3);return m(n.selectedKra(!1,e))}),l(1),r()}if(i&2){let o=a.$implicit;c(),B(o.title)}}function kt(i,a){if(i&1){let o=b();s(0,"li",39),_("click",function(){let e;g(o);let n=p(3);return m(n.selectedKra(!0,(e=n.addKraForm.get("kraTitle"))==null?null:e.value))}),s(1,"span"),l(2,"+ Add KRA"),r()()}}function St(i,a){if(i&1&&(s(0,"div",36)(1,"ul"),C(2,Ot,2,1,"li",37)(3,kt,3,0,"li",38),r()()),i&2){let o=p(2);c(),D("border-top-left-radius",o.kraTitle.length>0?0:null,"px")("border-top-right-radius",o.kraTitle.length>0?0:null,"px"),c(),d("ngForOf",o.addKraList),c(),d("ngIf",o.addKraList.length===0)}}function Et(i,a){if(i&1&&h(0,"textarea",40),i&2){let o=p(2);d("ngClass",Q(1,Pt,o.kraTitle.length>0))}}function It(i,a){if(i&1&&(s(0,"p",41),l(1),r()),i&2){let o=p(2);c(),te("KRA description: ",o.existingKraDescription,"")}}function Kt(i,a){if(i&1){let o=b();s(0,"div",25)(1,"h6",26),l(2,"Add KRA"),r()(),s(3,"form",27)(4,"div",28)(5,"div",29),h(6,"input",30),C(7,St,4,6,"div",31),r(),C(8,Et,1,3,"textarea",32)(9,It,2,1,"p",33),r(),s(10,"div",20)(11,"button",34),_("click",function(){let e=g(o).$implicit;return p().addKraForm.reset(),m(e.close("Close click"))}),l(12,"Close"),r(),s(13,"button",35),_("click",function(){let e=g(o).close,n=p();return m(e(n.saveKra()))}),l(14,"Save"),r()()()}if(i&2){let o=p();c(3),d("formGroup",o.addKraForm),c(3),D("border-bottom-left-radius",o.kraDropdown?0:null,"px")("border-bottom-right-radius",o.kraDropdown?0:null,"px"),d("ngClass",Se(10,wt,o.kraTitle.length===0,o.kraTitle.length>0,o.kraDropdown)),c(),d("ngIf",o.kraDropdown),c(),d("ngIf",o.newKraDes),c(),d("ngIf",o.existingKraDes),c(4),d("disabled",o.addKraForm.invalid)}}var Je=(()=>{let a=class a{constructor(t,e,n,u,M){this.designationKraService=t,this.settingsService=e,this.kraService=n,this.notificationService=u,this.fb=M,this.modalService=W(G),this.cycleDepartment=[],this.selectedDepartment="",this.selectedDesignation="Select Designation",this.kraTitle="",this.kraDescription="",this.addNewKra=!1,this.addKraList=[],this.kraDropdown=!1,this.alertProperties={},this.existingKraDes=!1,this.newKraDes=!1,this.existingKraDescription="",this.addKraForm=this.fb.group({kraTitle:["",Ie.required],kraDescription:[""]}),this.addKraForm.get("kraTitle")?.valueChanges.subscribe(v=>{this.populateDropdown(v)})}ngOnInit(){this.notificationService.notification$.subscribe(t=>{this.alertProperties=t}),this.designationKraService.getDepartments().subscribe(t=>{this.cycleDepartment=t.data.map(e=>({department_id:e.department_id,department_name:e.department_name})),this.selectedDepartment=this.cycleDepartment[0].department_name,this.getDesignationsByDeptId(this.cycleDepartment[0].department_id),this.settingsService.getKraList().subscribe(e=>{this.kraList=e})})}populateDropdown(t){t?(this.addKraList=this.kraList.filter(e=>e.title.toLowerCase().includes(t.toLowerCase())),this.kraDropdown=!0):(this.kraDropdown=!1,this.addKraList=[],this.existingKraDes=!1,this.newKraDes=!1,this.existingKraDescription="")}selectedKra(t,e){this.addNewKra=t,this.addNewKra?this.newKraDes=!0:(this.existingKraDescription=e.description,this.existingKraId=e.kraId,this.existingKraDes=!0,this.addKraForm.patchValue({kraTitle:this.addNewKra?e:e.title})),this.kraDropdown=!1,this.addKraList=[]}handleSelectDepartment(t){this.selectedDepartment=this.cycleDepartment.find(e=>e.department_id===t).department_name,this.getDesignationsByDeptId(t)}getDesignationsByDeptId(t){this.designationKraService.getDesignationByDept(t).subscribe(e=>{this.designationsData=e.data})}updateKRA(t){this.deptId=t.deptId,this.designationId=t.designationId,this.designationKraService.getKraBasedOnDeptDesignation(t.deptId,t.designationId).subscribe(e=>{this.kra=e})}saveKra(){if(!this.addNewKra){this.associateKraWithDesignationDepartment();return}let t={title:this.addKraForm.value.kraTitle,description:this.addKraForm.value.kraDescription,createdBy:1};this.settingsService.addKraList(t).subscribe(e=>{this.addedKraId=e.kraId,this.associateKraWithDesignationDepartment()})}associateKraWithDesignationDepartment(){let t={departmentId:this.deptId,designationId:this.designationId,kraId:this.addNewKra?this.addedKraId:this.existingKraId,weightage:0};this.kraService.addKraDesignationVsKra(t).subscribe(e=>{this.notificationService.showNotification("Successful","KRA added successfully","tick","alert-success"),this.updateKRA({deptId:this.deptId,designationId:this.designationId}),this.addNewKra=!1})}openVerticallyCentered(t){this.modalService.open(t,{centered:!0}).result.finally(()=>{this.resetModal()})}resetModal(){this.addKraForm.reset()}saveSettings(){this.selectKraComponent.saveKra()}};a.\u0275fac=function(e){return new(e||a)(f(Ce),f(I),f(be),f($),f(Re))},a.\u0275cmp=y({type:a,selectors:[["app-designation-vs-kra"]],viewQuery:function(e,n){if(e&1&&j(xe,5),e&2){let u;q(u=z())&&(n.selectKraComponent=u.first)}},inputs:{permissions:"permissions"},standalone:!0,features:[O],decls:35,vars:12,consts:[["content",""],["class","message mt-3",4,"ngIf"],[1,"designation-vs-kra-container"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","d-flex","justify-content-between","btn-outline-primary"],[1,"bi","bi-chevron-down"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["ngbDropdownItem",""],[1,"designation-kra-wrapper"],[1,"designation-kra-header","row"],[1,"col-md-4","p-0"],[1,"header-label"],[1,"col-md-6","p-0"],[1,"col-md-2","p-0","text-end"],["type","button",1,"btn","btn-light",3,"click","disabled"],[1,"bi","bi-plus-square"],[1,"designation-kra-container","row"],[3,"designationChange","designationsData"],[1,"col-md-8","p-0"],[3,"kraData","editPermission"],[1,"modal-footer"],["type","button",1,"btn","save","btn-secondary",3,"click","disabled"],[3,"alertClass","title","message","isVisible","svgType"],[1,"message","mt-3"],["ngbDropdownItem","",3,"click"],[1,"modal-header"],[1,"modal-title"],[3,"formGroup"],[1,"modal-body"],[1,"input-container"],["type","text","formControlName","kraTitle","name","kra-title","id","kra-title","placeholder","Write your KRA*","autocomplete","off",1,"kra-box",3,"ngClass"],["class","result-box",4,"ngIf"],["type","text","formControlName","kraDescription","class","kra-discription","name","kra-discription","id","kra-discription","placeholder","Write your KRA description here (Optional)",3,"ngClass",4,"ngIf"],["class","text-muted m-0",4,"ngIf"],["type","button",1,"btn","close","btn-secondary",3,"click"],["type","button",1,"btn","save","btn-warning",3,"click","disabled"],[1,"result-box"],[3,"click",4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"],["type","text","formControlName","kraDescription","name","kra-discription","id","kra-discription","placeholder","Write your KRA description here (Optional)",1,"kra-discription",3,"ngClass"],[1,"text-muted","m-0"]],template:function(e,n){if(e&1){let u=b();C(0,xt,2,0,"p",1),s(1,"div",2)(2,"p"),l(3," Select Department "),r(),s(4,"div",3)(5,"button",4),l(6),h(7,"i",5),r(),s(8,"div",6),re(9,yt,2,1,"button",7,oe),r()()(),s(11,"div",8)(12,"div",9)(13,"div",10)(14,"h4",11),l(15,"Select Designation"),r()(),s(16,"div",12)(17,"h4",11),l(18,"Select KRA"),r()(),s(19,"div",13)(20,"button",14),_("click",function(){g(u);let v=V(24);return m(n.openVerticallyCentered(v))}),h(21,"i",15),l(22," Add KRA "),r()(),C(23,Kt,15,14,"ng-template",null,0,T),r(),s(25,"div",16)(26,"div",10)(27,"app-designation",17),_("designationChange",function(v){return g(u),m(n.updateKRA(v))}),r()(),s(28,"div",18),h(29,"app-select-kra",19),r()()(),s(30,"div")(31,"div",20)(32,"button",21),_("click",function(){return g(u),m(n.saveSettings())}),l(33,"Save"),r()()(),h(34,"app-notification-alert",22)}e&2&&(d("ngIf",!n.permissions.includes("EDIT_SETTINGS")),c(6),te(" ",n.selectedDepartment," "),c(3),ae(n.cycleDepartment),c(11),d("disabled",!n.permissions.includes("EDIT_SETTINGS")),c(7),d("designationsData",n.designationsData),c(2),d("kraData",n.kra)("editPermission",!n.permissions.includes("EDIT_SETTINGS")),c(3),d("disabled",!n.permissions.includes("EDIT_SETTINGS")),c(2),d("alertClass",n.alertProperties.alertClass)("title",n.alertProperties.title)("message",n.alertProperties.message)("isVisible",n.alertProperties.isVisible)("svgType",n.alertProperties.svgType))},dependencies:[fe,ue,me,ge,de,pe,k,X,se,R,xe,ze,E,J,N,S,H,Z,le,De,Te],styles:[".designation-kra-wrapper[_ngcontent-%COMP%]   .designation-kra-header[_ngcontent-%COMP%]{display:flex;padding:15px 0;align-items:center}.designation-kra-wrapper[_ngcontent-%COMP%]   .header-label[_ngcontent-%COMP%]{color:#000;font-size:18px;font-weight:400;margin:0;padding-left:16px}.designation-vs-kra-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1.5rem;color:#444}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]{border:none;box-shadow:0 0 4px #0000004d}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{color:#212529}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#fffaf0}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{background-color:#f8f9fa}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:325px;border:none;padding:15px;border-radius:5px;text-align:start;color:#442400;background-color:#fff}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background-color:#f8f9fa}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.btn[_ngcontent-%COMP%]   save[_ngcontent-%COMP%]   btn-secondary[_ngcontent-%COMP%]{background-color:#442400}.container[_ngcontent-%COMP%]{position:relative}.modal-footer[_ngcontent-%COMP%]{margin-top:10px}.btn.close.btn-secondary[_ngcontent-%COMP%]{background:none;color:#fff;border-color:#442400;color:#442400;margin-right:10px}.btn.save.btn-secondary[_ngcontent-%COMP%]{background-color:#442400}.btn-light[_ngcontent-%COMP%]{border-color:#000;margin-inline-start:auto;height:40px}.kra-box[_ngcontent-%COMP%], .kra-discription[_ngcontent-%COMP%]{display:block;width:100%;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:var(--bs-body-color);appearance:none;background-color:var(--bs-body-bg);background-clip:padding-box;border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius);transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.result-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:absolute;top:100%;left:0;z-index:1;width:100%}.input-container[_ngcontent-%COMP%]{position:relative}.result-box[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{border-radius:5px;width:100%;padding:5px 0;height:100px;overflow-x:hidden;border:1px solid rgba(0,0,0,.1);background-color:#fff;outline:none}.result-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;border-radius:3px;padding:10px;cursor:pointer}.result-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#fffaf0}.kra-box[_ngcontent-%COMP%]:focus{outline:none}.designation-kra-container.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}p.message[_ngcontent-%COMP%]{font-size:14px;font-weight:300;color:#444;width:fit-content;padding:4px 15px;border:1px solid #442400;background-color:#fffaf0;border-radius:30px}"]});let i=a;return i})();function Dt(i,a){if(i&1&&h(0,"app-goals",11),i&2){let o=p();d("permissions",o.usersPermissions)}}function Tt(i,a){if(i&1){let o=b();s(0,"app-kra",12),_("triggerNotification",function(e){g(o);let n=p();return m(n.triggerNotification(e))}),r()}if(i&2){let o=p();d("permissions",o.usersPermissions)}}function Vt(i,a){if(i&1&&h(0,"app-designation-vs-kra",11),i&2){let o=p();d("permissions",o.usersPermissions)}}function Rt(i,a){if(i&1&&h(0,"app-general",11),i&2){let o=p();d("permissions",o.usersPermissions)}}var Ze=(()=>{let a=class a{constructor(t,e,n){this.notificationService=t,this.sharedService=e,this.employeeConfig=n,this.active=1,this.alertProperties={}}ngOnInit(){this.notificationService.notification$.subscribe(t=>{this.alertProperties=t}),this.sharedService.triggerNotification$.subscribe(t=>{this.triggerNotification(t)})}ngDoCheck(){this.usersPermissions=this.employeeConfig.getPermissions()}triggerNotification(t){this.notificationService.showNotification(t.title,t.description,t.svg,t.alert)}};a.\u0275fac=function(e){return new(e||a)(f($),f(_e),f(qe))},a.\u0275cmp=y({type:a,selectors:[["app-settings"]],standalone:!0,features:[O],decls:27,vars:11,consts:[["nav","ngbNav"],[1,"settings-container"],[1,"row","my-2"],[1,"col-12","nav-bar"],["ngbNav","",1,"nav-tabs",3,"activeIdChange","activeId"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"bi","bi-grid"],["ngbNavContent",""],[1,"col-12",3,"ngbNavOutlet"],[3,"alertClass","title","message","isVisible","svgType"],[3,"permissions"],[3,"triggerNotification","permissions"]],template:function(e,n){if(e&1){let u=b();s(0,"div",1)(1,"div",2)(2,"div",3)(3,"ul",4,0),x("activeIdChange",function(v){return g(u),P(n.active,v)||(n.active=v),m(v)}),s(5,"li",5)(6,"button",6),h(7,"i",7),l(8,"Goals"),r(),C(9,Dt,1,1,"ng-template",8),r(),s(10,"li",5)(11,"button",6),h(12,"i",7),l(13,"KRA"),r(),C(14,Tt,1,1,"ng-template",8),r(),s(15,"li",5)(16,"button",6),h(17,"i",7),l(18,"Designation vs KRA"),r(),C(19,Vt,1,1,"ng-template",8),r(),s(20,"li",5)(21,"button",6),h(22,"i",7),l(23,"General"),r(),C(24,Rt,1,1,"ng-template",8),r()()(),h(25,"div",9),r()(),h(26,"app-notification-alert",10)}if(e&2){let u=V(4);c(3),w("activeId",n.active),c(2),d("ngbNavItem",1),c(5),d("ngbNavItem",2),c(5),d("ngbNavItem",3),c(5),d("ngbNavItem",4),c(5),d("ngbNavOutlet",u),c(),d("alertClass",n.alertProperties.alertClass)("title",n.alertProperties.title)("message",n.alertProperties.message)("isVisible",n.alertProperties.isVisible)("svgType",n.alertProperties.svgType)}},dependencies:[je,Ne,Ae,Be,Ge,Fe,Le,We,Xe,Ue,Ye,Je,k,Z],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;min-height:100;color:#444}button[_ngcontent-%COMP%]:hover{color:#442400}button[_ngcontent-%COMP%]:focus, .nav-link.active[_ngcontent-%COMP%]{outline:none;color:#442400}button[_ngcontent-%COMP%]{color:#442400}i[_ngcontent-%COMP%]{margin-right:7px}.nav-tabs[_ngcontent-%COMP%]{background-color:#f8f9ff;--bs-nav-tabs-border-color: white;border-radius:0%;height:60px}.nav-link[_ngcontent-%COMP%]{border-radius:0%}.nav-link.active[_ngcontent-%COMP%]{border-color:#fff;border-radius:0%;border-bottom:3px solid #ccc}li[_ngcontent-%COMP%]{display:contents}.settings-container[_ngcontent-%COMP%]{padding:10px 20px;background:#fff;max-width:1300px;box-shadow:0 10px 20px #ccc;height:100%}@media screen and (min-width: 768px) and (max-width: 1024px){.settings-container[_ngcontent-%COMP%]{max-width:959px}}.settings-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:20px}.col-md-6[_ngcontent-%COMP%]{padding-left:0;padding-right:0}"]});let i=a;return i})();var Fn=[{path:"",component:Ze}];export{Fn as SETTINGS_ROUTE};
