import{a as G,b as J,c as ft}from"./chunk-Y7DHZUM4.js";import{a as T}from"./chunk-TORHZTRP.js";import{a as ie}from"./chunk-GNIRA6UU.js";import{a as Ie,b as Ee}from"./chunk-TIRIUDSN.js";import{$ as Ge,A as v,B as U,C as ne,D as me,E as ot,F as D,G as ye,H as Oe,J as pe,K as ge,N as it,O as oe,P as ue,Q as rt,R as at,S as st,T as lt,U as ct,V as dt,W as mt,X as pt,Y as ke,Z as gt,_ as De,a as Xe,aa as W,ba as q,ca as $,da as Y,ea as H,f as Ze,fa as K,ga as ut,ha as Q,l as et,n as I,s as Pe,ua as be,v as tt,va as Te,w as nt,x as E,z}from"./chunk-3NBVBNCQ.js";import{$b as se,Aa as F,Ab as ee,Bb as te,Cb as M,Eb as u,Fb as m,Fc as Se,Gc as Qe,Ic as Je,Jc as de,Kb as We,Kc as L,Lb as qe,Mb as $e,Nb as R,Ob as l,Pb as k,Qb as P,Rb as Ye,Sb as V,Tb as N,Ub as A,Vb as ce,Wa as c,Wb as O,Xa as g,Xb as He,Yb as we,Z as ze,Zb as re,_b as ae,ca as Ue,da as Z,ia as y,lb as x,nb as w,pb as Re,sa as f,sb as b,ta as h,tb as le,ub as Me,vb as j,wb as B,xb as i,yb as a,zb as C}from"./chunk-C6LWXFOC.js";var _e=(()=>{let s=class s{constructor(e,t,n){this.activeModal=e,this.sharedDataService=t,this.authService=n,this.submit=new F,this.selectedOption="",this.userId=this.authService.userId()}redirectToGoal(){this.submit.emit(),this.sharedDataService.returnTo("showList"),this.sharedDataService.setSharedData({userId:this.userId}),this.activeModal.close()}selectOption(e){this.selectedOption=e}};s.\u0275fac=function(t){return new(t||s)(g(ut),g(T),g(E))},s.\u0275cmp=y({type:s,selectors:[["app-popup-modal"]],outputs:{submit:"submit"},standalone:!0,features:[O],decls:14,vars:0,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row"],[1,"text"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"div",1)(2,"h5",2),l(3,"Are you sure?"),a(),i(4,"button",3),u("click",function(){return n.activeModal.close()}),a()(),i(5,"div",4)(6,"div",5)(7,"span",6),l(8,"Once you have published, you cannot edit the goal."),a()()(),i(9,"div",7)(10,"button",8),u("click",function(){return n.activeModal.close()}),l(11,"Close"),a(),i(12,"button",9),u("click",function(){return n.redirectToGoal()}),l(13,"Confirm"),a()()())},dependencies:[K],styles:[".gap-above[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.d-inline-block[_ngcontent-%COMP%]{margin:10px}.btn-primary[_ngcontent-%COMP%]{background-color:#ffcb56;border-color:#ffcb56;color:#442400}.row[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin:10px}.row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}button[_ngcontent-%COMP%]{border-color:0}"]});let o=s;return o})();function yt(o,s){if(o&1){let r=M();i(0,"div",22),C(1,"i",25),i(2,"button",24),u("click",function(){f(r);let t=m(2).$implicit,n=m();return h(n.updateGoal(t))}),l(3,"Edit"),a()()}}function Ot(o,s){if(o&1){let r=M();i(0,"div",26)(1,"h6",27),l(2,"Are you sure?"),a()(),i(3,"div",28)(4,"p"),l(5,"You want to delete the goal?"),a()(),i(6,"div",29)(7,"button",30),u("click",function(){let t=f(r).$implicit;return h(t.close("Close click"))}),l(8,"Close"),a(),i(9,"button",31),u("click",function(){f(r);let t=m(2).$implicit,n=m();return h(n.deleteGoal(t.goalId))}),l(10,"Delete"),a()()}}function kt(o,s){if(o&1){let r=M();i(0,"div",22),C(1,"i",32),i(2,"button",24),u("click",function(){f(r);let t=m(2).$implicit,n=m();return h(n.openModal(t))}),l(3,"Publish"),a()()}}function Dt(o,s){if(o&1){let r=M();i(0,"div",19),C(1,"i",20),i(2,"div",21),x(3,yt,4,0,"div",22),i(4,"div",22),C(5,"i",23),i(6,"button",24),u("click",function(){f(r);let t=R(9),n=m(2);return h(n.open(t))}),l(7,"Delete"),a()(),x(8,Ot,11,0,"ng-template",null,0,se)(10,kt,4,0,"div",22),a()()}if(o&2){let r=m().$implicit;c(3),b(3,r.status=="Draft"?3:-1),c(7),b(10,r.status=="Draft"?10:-1)}}function Gt(o,s){if(o&1&&(i(0,"span",15),l(1),a()),o&2){let r=m().$implicit;c(),P("KRA - ",r==null||r.kra==null?null:r.kra.title,"")}}function It(o,s){o&1&&(ee(0),l(1," No comments "),te())}function Et(o,s){if(o&1&&(ee(0),l(1),te()),o&2){let r=m().$implicit;c(),P(" ",r.commentsList.length," comments ")}}function Tt(o,s){o&1&&(ee(0),l(1," 1 comment "),te())}function Ft(o,s){if(o&1){let r=M();i(0,"div",1)(1,"div",3)(2,"div",4)(3,"h5"),l(4),a(),i(5,"div")(6,"span"),l(7),re(8,"titlecase"),a(),x(9,Dt,11,2,"div",5),a()(),i(10,"div",6)(11,"p"),l(12),i(13,"span",7),u("click",function(){let t=f(r).$implicit,n=m();return h(n.viewGoal(t))}),l(14," View Full "),a()()(),i(15,"div",8)(16,"div",9),C(17,"i",10),i(18,"span",11),l(19),re(20,"date"),a(),i(21,"span",12),l(22,"Due Date"),a()(),i(23,"div",13)(24,"div",14),x(25,Gt,2,1,"span",15),a(),i(26,"div",16),C(27,"img",17),i(28,"span",18),x(29,It,2,0,"ng-container")(30,Et,2,1)(31,Tt,2,0),a()()()()()()}if(o&2){let r=s.$implicit,e=m();c(4),k(r.title),c(3),k(ae(8,7,r.status)),c(2),w("ngIf",!e.hideButton),c(3),P("",e.truncateDescription(r.description)," "),c(7),k(ae(20,9,r.dueDate)),c(6),b(25,e.userConfig.isGoalVsKRAEnabled?25:-1),c(4),b(29,r.commentsList.length===0?29:r.commentsList.length>1?30:31)}}var ht=(()=>{let s=class s{constructor(e,t,n,d,_,p){this.router=e,this.goalService=t,this.sharedDataService=n,this.authService=d,this.userConfigService=_,this.notificationService=p,this.goalListPresent=!0,this.mappedKra="",this.userConfig={},this.goals=[],this.deleteGoalId=new F,this.updatedGoalId=new F,this.kra=new F,this.submit=new F,this.hideButton=!1,this.mappedDataList=[],this.mappedData=[],this.userKraId=0,this.goalVsKraMapId=0,this.alertProperties={},this.userIdFromToken=0,this.modalService=Z(Q),this.config=this.userConfigService.getConfig(),this.userConfig=this.config,this.userIdFromToken=this.authService.userId()}ngDoCheck(){this.goals[0]?.userId==this.userIdFromToken?this.hideButton=!1:this.hideButton=!0}viewGoal(e){this.sharedDataService.setSharedData({data:e,kra:this.mappedData,name:this.associateName}),this.router.navigate(["/goals/viewGoal"])}deleteGoal(e){this.deleteGoalId.emit(e),this.modalService.dismissAll()}updateGoal(e){this.mappedData=[],this.sharedDataService.setSharedData({data:e}),this.updatedGoalId.emit(e)}getUserKra(){this.userKraSubscription=this.goalService.getUserKra().subscribe({next:e=>{},error:e=>{e&&e.status==403&&this.authService.navigateToLogin(!0),console.error("Error fetching goals: ",e)}})}openModal(e){let t="Published",n=e.goalId,d=this.modalService.open(_e,{centered:!0});d.componentInstance.submit.subscribe(()=>{let _=new Date,p=new Date(e.dueDate);if(_>p){this.notificationService.showNotification("Error","Due Date cannot be past","cross","alert-danger");return}this.goalService.updateGoals(n,e).subscribe({next:S=>{e.status=t,this.notificationService.showNotification("Successful","Goal published successfully","tick","alert-success"),this.router.navigate(["/goals"],{queryParams:{goalsAddedSuccess:"success",type:t}})},error:S=>{S&&S.status==403&&this.authService.navigateToLogin(!0),console.error("Error publishing goals: ",S)}}),this.modalService.dismissAll()}),d.result.then(_=>{console.log(_)}).catch(_=>{console.log(_)})}ngOnDestroy(){}open(e){this.modalService.open(e)}truncateDescription(e){return e.length>150?e.substring(0,150)+"...":e}getGoalVsKra(e){this.goalvskraSubscription=this.goalService.getGoalVsKraMapping(e).subscribe({next:t=>{t&&t.userKra?(this.mappedKra=t.userKra.kra.title,this.userKraId=t.userKra.userKraId,this.goalVsKraMapId=t.goalVsKraMapId):console.log("User Kra data is null or undefined. Unable to map Kra title."),this.mappedDataList.push({goalId:e,mappedKra:this.mappedKra,userKraId:this.userKraId,goalVsKraMapId:this.goalVsKraMapId})},error:t=>{t&&t.status==403,console.error("Error posting: ",t)}})}};s.\u0275fac=function(t){return new(t||s)(g(I),g(G),g(T),g(E),g(J),g(Ee))},s.\u0275cmp=y({type:s,selectors:[["app-goals-list"]],inputs:{goals:"goals",associateName:"associateName"},outputs:{deleteGoalId:"deleteGoalId",updatedGoalId:"updatedGoalId",kra:"kra",submit:"submit"},standalone:!0,features:[O],decls:3,vars:5,consts:[["content",""],[1,"container","goals-list"],[3,"alertClass","title","message","isVisible","svgType"],[1,"row"],[1,"col-md-12","header"],["ngbDropdown","","ngbDropdownToggle","","class","d-inline-block hide-arrow",4,"ngIf"],[1,"col-md-12","goal-list"],[1,"view-goal",3,"click"],[1,"row","justify-content-between"],[1,"col-6","goal-date"],[1,"bi","bi-calendar2"],[1,"due-date"],[1,"due-message"],[1,"col-6","kra-comments"],[1,"col-8"],[1,"kra-name"],[1,"col-4","d-flex","col-comments"],["src","./assets/comment.svg","alt","Icon",1,"icon"],[1,"comments-count"],["ngbDropdown","","ngbDropdownToggle","",1,"d-inline-block","hide-arrow"],[1,"bi","bi-three-dots-vertical"],["ngbDropdownMenu","","aria-labelledby","dropdownOptions",1,"dropdown-menu-left"],[1,"dropdown-item"],[1,"bi","bi-trash3"],["ngbDropdownItem","",3,"click"],[1,"bi","bi-pencil-square"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"bi","bi-check-lg"]],template:function(t,n){t&1&&(j(0,Ft,32,11,"div",1,Me),C(2,"app-notification-alert",2)),t&2&&(B(n.goals),c(2),w("alertClass",n.alertProperties.alertClass)("title",n.alertProperties.title)("message",n.alertProperties.message)("isVisible",n.alertProperties.isVisible)("svgType",n.alertProperties.svgType))},dependencies:[K,H,Y,$,W,q,L,Se,Je,de,Ie],styles:[".container[_ngcontent-%COMP%]{padding:20px;background:#fff;max-width:1300px}@media screen and (min-width: 768px) and (max-width: 1024px){.container[_ngcontent-%COMP%]{max-width:959px}}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;color:#5f5f5f}.header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px}.header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-radius:100px;border:solid 1px #fff1d6;background-color:#fffaf0;font-size:12px;color:#442400;padding:4.2px 7.8px}.header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 -15px 0 15px;cursor:pointer}.goal-list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;overflow-wrap:break-word}.goal-date[_ngcontent-%COMP%]{margin-top:10px}.goal-date[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .goal-date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#9d9d9d;margin-right:10px}.goal-date[_ngcontent-%COMP%]   .due-date[_ngcontent-%COMP%]{color:#878787}.goal-date[_ngcontent-%COMP%]   .due-message[_ngcontent-%COMP%]{margin-left:5px;padding:2px 8px;border-radius:20px;border:solid .5px #eaeaea;background-color:#f9f9f9;font-size:12px}.kra-comments[_ngcontent-%COMP%]{margin:10px -2rem 0px 0px;display:flex}.kra-comments[_ngcontent-%COMP%]   .kra-name[_ngcontent-%COMP%]{padding:2px 8px;border-radius:20px;border:solid .5px #eaeaea;background-color:#f9f9f9;font-size:12px;color:#9d9d9d;float:right}.kra-comments[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 10px 0 20px}.kra-comments[_ngcontent-%COMP%]   .comments-count[_ngcontent-%COMP%]{float:inline-end;padding:2px 8px;border-radius:20px;border:solid .5px #eaeaea;background-color:#f9f9f9;font-size:12px;color:#9d9d9d}.hide-arrow[_ngcontent-%COMP%]:after{display:none}.dropdown-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin:-3px 0;background-color:#fff}.dropdown-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#442400;background-color:#fffaf0}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;margin-left:0}.dropdown-menu-left[_ngcontent-%COMP%]{top:30px;left:-135px}.dropdown-menu-left[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background-color:#fffaf0}.goals-list[_ngcontent-%COMP%]{margin-bottom:18px;border-radius:4px;border:solid 1px #e7e7e7}@media screen and (max-width: 430px){.goals-list[_ngcontent-%COMP%]{width:398px}}.view-goal[_ngcontent-%COMP%]{border:solid 1px #e7e7e7;color:#9d9d9d;border-radius:100px;font-size:12px;background-color:#f9f9f9;padding:2px 8px;margin-left:5px;transition:box-shadow .3s ease}.view-goal[_ngcontent-%COMP%]:hover{box-shadow:0 5px 10px #f1f2fa;color:#878787;cursor:pointer}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{border-radius:4px;color:#442400;border:solid 1px #442400;background-color:#fff0}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#9d9d9d;border:none}.modal-footer[_ngcontent-%COMP%]   .btn-outline-dark[_ngcontent-%COMP%]{border-radius:4px;color:#442400;background-color:#ffcb56;border-color:#ffcb56}"]});let o=s;return o})();function Nt(o,s){if(o&1){let r=M();i(0,"div",20)(1,"h6",21),l(2,"Are you sure?"),a()(),i(3,"div",22)(4,"p"),l(5,"You want to delete the comment?"),a()(),i(6,"div",23)(7,"button",24),u("click",function(){let t=f(r).$implicit;return h(t.close("Close click"))}),l(8,"Close"),a(),i(9,"button",25),u("click",function(){f(r);let t=m().$implicit,n=m();return h(n.deleteComment(t.commentId))}),l(10,"Delete"),a()()}}function At(o,s){if(o&1){let r=M();i(0,"div",20)(1,"h6",26),l(2,"Edit your comment"),a()(),i(3,"div",22)(4,"form",27)(5,"textarea",28),A("ngModelChange",function(t){f(r);let n=m(2);return N(n.commentText,t)||(n.commentText=t),h(t)}),a()()(),i(6,"div",23)(7,"button",24),u("click",function(){let t=f(r).$implicit;return h(t.close("Close click"))}),l(8,"Close"),a(),i(9,"button",25),u("click",function(){f(r);let t=m().$implicit,n=m();return h(n.save(t.commentId))}),l(10,"Update"),a()()}if(o&2){let r=m(2);c(5),V("ngModel",r.commentText)}}function Lt(o,s){if(o&1){let r=M();i(0,"div",3),C(1,"i",5),i(2,"div",8)(3,"div",9)(4,"div")(5,"h6",10),l(6),a(),i(7,"span",11),l(8),re(9,"date"),a()(),i(10,"div")(11,"div",12),C(12,"i",13),i(13,"div",14)(14,"div",15),C(15,"i",16),i(16,"button",17),u("click",function(){let t=f(r).$implicit,n=R(25),d=m();return h(d.updateComment(n,t.commentId))}),l(17,"Edit"),a()(),i(18,"div",15),C(19,"i",18),i(20,"button",17),u("click",function(){f(r);let t=R(23),n=m();return h(n.open(t))}),l(21,"Delete"),a()()()(),x(22,Nt,11,0,"ng-template",null,0,se)(24,At,11,1,"ng-template",null,1,se),a()(),i(26,"div")(27,"p",19),l(28),a()()()()}if(o&2){let r=s.$implicit;c(6),k(r.commentBy),c(2),k(ae(9,3,r.commentedOn)),c(20),k(r.description)}}var _t=(()=>{let s=class s{constructor(e,t,n,d){this.authService=e,this.router=t,this.commentService=n,this.employeeConfig=d,this.modalService=Z(Q),this.commentText="",this.userDetails={},this.username="",this.localList=[],this.goalId="",this.GoalCommentsList="",this.noOfComments=new F,this.newComment="",this.empConfigData=this.employeeConfig.getEmployeeData()}ngOnInit(){this.userDetails=this.authService.userInfo(),this.renderComments(),this.username=this.empConfigData.data.employee[0].name}renderComments(){this.commentSubscription=this.commentService.getCommentsByGoalId(this.goalId).subscribe({next:e=>{let t;t=e?.length??0,this.noOfComments.emit(t),e&&e.length!==0&&(this.localList=e)},error:e=>{e&&e.status==403&&this.authService.navigateToLogin(!0),console.error("Error fetching goals: ",e)}})}postComment(){let e=this.createCommentObject2(this.newComment);this.commentService.postCommentByGoalId(e).subscribe(t=>{console.log("Post  is ",t),this.renderComments(),this.newComment=""},t=>{console.log("Error is ",t)})}createCommentObject2(e){return{goalId:this.goalId,description:e}}updateComment(e,t){let n=this.localList.filter(_=>_.commentId===t),d=n.length>0?n[0]:null;this.commentText=d.description,this.modalService.open(e)}save(e){let t={description:this.commentText};this.commentService.updateComment(e,t).subscribe({next:n=>{this.renderComments()},error:n=>{n&&n.status==403&&this.authService.navigateToLogin(!0),console.error("Error editing comment: ",n)}}),this.modalService.dismissAll()}deleteComment(e){this.commentService.deleteComment(e).subscribe({next:t=>{console.log("Comment deleted successfully:",t),this.localList=[],this.renderComments()},error:t=>{t&&t.status==403&&this.authService.navigateToLogin(!0),console.error("Error deleting comment: ",t)}}),this.modalService.dismissAll()}open(e){this.modalService.open(e)}ngOnDestroy(){this.commentSubscription.unsubscribe()}};s.\u0275fac=function(t){return new(t||s)(g(E),g(I),g(ft),g(Te))},s.\u0275cmp=y({type:s,selectors:[["app-goal-comments"]],inputs:{goalId:"goalId",GoalCommentsList:"GoalCommentsList"},outputs:{noOfComments:"noOfComments"},standalone:!0,features:[O],decls:8,vars:1,consts:[["content",""],["editcontent",""],[1,"spacing-left"],[1,"col-8","d-flex"],[1,"d-flex","mt-3","comment-area"],[1,"bi","bi-person-circle","fs-2"],["name","","id","","cols","50","row","50",1,"form-control","mx-3",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-primary","my-3",3,"click"],[1,"col-12","d-flex","mx-3","flex-column"],[1,"col-9","my-2","d-flex","justify-content-between"],[1,"d-inline","comment-user"],[1,"updated-date","m-3"],["ngbDropdown","","ngbDropdownToggle","",1,"d-inline-block","hide-arrow"],[1,"bi","bi-three-dots-vertical"],["ngbDropdownMenu","","aria-labelledby","dropdownOptions",1,"dropdown-menu-left"],[1,"dropdown-item"],[1,"bi","bi-pencil-square"],["ngbDropdownItem","",3,"click"],[1,"bi","bi-trash3"],[1,"comments"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"modal-title"],[1,"d-flex","flex-column","gap-3",".resizable-modal"],["type","text","name","edit-content","id","edit-content",1,"form-control","w-100",3,"ngModelChange","ngModel"]],template:function(t,n){t&1&&(i(0,"div",2),j(1,Lt,29,5,"div",3,le),i(3,"div",4),C(4,"i",5),i(5,"textarea",6),A("ngModelChange",function(_){return N(n.newComment,_)||(n.newComment=_),_}),a(),i(6,"button",7),u("click",function(){return n.postComment()}),l(7,"Comment"),a()()()),t&2&&(c(),B(n.localList),c(4),V("ngModel",n.newComment))},dependencies:[oe,Oe,z,U,ne,ye,ot,K,H,Y,$,W,q,L,de,be],styles:['*[_ngcontent-%COMP%]{color:#444}.updated-date[_ngcontent-%COMP%]{font-size:.875rem;color:#9d9d9d}.form-control[_ngcontent-%COMP%]{width:50%;min-height:5rem}.btn-primary[_ngcontent-%COMP%]{position:relative;background-color:#ffcb56;border-color:#ffcb56;color:#442400;overflow:hidden;--bs-btn-active-color: #442400;--bs-btn-active-bg: #ffcb56;--bs-btn-active-border-color: #ffcb56}.btn-primary[_ngcontent-%COMP%]:after{content:"";background:#755302;display:block;position:absolute;bottom:0;left:0;padding-top:45%;padding-left:110%;opacity:0;border-radius:5px;transition:all .4s}.btn-primary[_ngcontent-%COMP%]:active:after{border-color:#ffcb56;padding:0;margin:0;opacity:1;transition:0s}.spacing-left[_ngcontent-%COMP%]{margin:20px 10px 10px 20px}.hide-arrow[_ngcontent-%COMP%]:after{display:none}.dropdown-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin:-3px 0;background-color:#fff}.dropdown-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#442400;background-color:#fffaf0}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;margin-left:0}.dropdown-menu-left[_ngcontent-%COMP%]{top:30px;left:-135px}.dropdown-menu-left[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background-color:#fffaf0}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{border-radius:4px;border:solid 1px #442400;background-color:#fff0}.modal-footer[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#9d9d9d;border:none}.modal-footer[_ngcontent-%COMP%]   .btn-outline-dark[_ngcontent-%COMP%]{border-radius:4px;color:#442400;background-color:#ffcb56;border-color:#ffcb56}.w-100[_ngcontent-%COMP%]{width:100%!important}.modal-title[_ngcontent-%COMP%]{font-weight:400;color:#030200}.comments[_ngcontent-%COMP%]{text-wrap:balance}.resizable-modal[_ngcontent-%COMP%]{height:auto!important;max-height:calc(100vh - 200px);overflow-y:auto}.bi-three-dots-vertical[_ngcontent-%COMP%]{cursor:pointer}']});let o=s;return o})();var Ct=(()=>{let s=class s{constructor(e){this.fb=e,this.dateRangeSelected=new F,this.dateRangeForm=this.fb.group({startDate:[],endDate:[]})}ngOnInit(){let e=new Date,t=e.toISOString().slice(0,10),d=new Date(e.getFullYear(),e.getMonth()+1,0).toISOString().slice(0,10);this.dateRangeForm=this.fb.group({startDate:t,endDate:d})}apply(){let e=this.dateRangeForm.value.startDate,t=this.dateRangeForm.value.endDate;e||(e=this.originalGoals.reduce((d,_)=>{let p=new Date(_.createdOn.split("T")[0]);return p<d?p:d},new Date)),t||(t=new Date),this.dateRangeSelected.emit({start:e,end:t})}};s.\u0275fac=function(t){return new(t||s)(g(it))},s.\u0275cmp=y({type:s,selectors:[["app-date-range-picker"]],inputs:{originalGoals:"originalGoals"},outputs:{dateRangeSelected:"dateRangeSelected"},standalone:!0,features:[O],decls:11,vars:1,consts:[[1,"modal-body",3,"formGroup"],[1,"form-group"],["for","startDate"],["type","date","formControlName","startDate",1,"form-control"],["for","endDate"],["type","date","formControlName","endDate",1,"form-control"],[1,"btn","btn-primary",3,"click"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"div",1)(2,"label",2),l(3,"Start Date:"),a(),C(4,"input",3),a(),i(5,"div",1)(6,"label",4),l(7,"End Date:"),a(),C(8,"input",5),a(),i(9,"button",6),u("click",function(){return n.apply()}),l(10,"Submit"),a()()),t&2&&w("formGroup",n.dateRangeForm)},dependencies:[ue,z,U,ne,pe,ge],styles:[".btn-primary[_ngcontent-%COMP%]{position:relative;background-color:#ffcb56;border-color:#ffcb56;color:#442400;overflow:hidden;margin-top:2%}"]});let o=s;return o})();var Kt=["successTpl"],Rt=o=>({"margin-left":o});function jt(o,s){if(o&1&&(i(0,"p",13),l(1),a()),o&2){let r=m(3);c(),P("You have added ",r.getGoalCounValue(r.selfData.user_id)==0?"0":r.getGoalCounValue(r.selfData.user_id)," goals")}}function Bt(o,s){if(o&1){let r=M();i(0,"div",3)(1,"div",5),u("click",function(){f(r);let t=m(2);return h(t.loadGoals(t.selfData.user_id,""))}),i(2,"div",6)(3,"div",7)(4,"div",8),C(5,"img",9),a(),i(6,"div",10)(7,"h5",11),l(8," Self Goals"),a(),i(9,"p",12),l(10),a(),x(11,jt,2,1,"p",13),a()()()()()}if(o&2){let r=m(2);c(10),k(r.selfData.designation_name),c(),b(11,r.goalsCountLoaded?11:-1)}}function zt(o,s){if(o&1&&(i(0,"p",13),l(1),a()),o&2){let r=m().$implicit,e=m(4);c(),Ye("",e.getFirstName(r.name)," has added ",e.getGoalCounValue(r.user_id)<1?"0":e.getGoalCounValue(r.user_id)," goals")}}function Ut(o,s){if(o&1){let r=M();i(0,"div",22)(1,"div",6)(2,"div",23),u("click",function(){let t=f(r).$implicit,n=m(4);return h(n.loadGoals(t.user_id,t.name))}),i(3,"div",8),C(4,"img",9),a(),i(5,"div",10)(6,"h5",11),l(7),a(),i(8,"p",12),l(9),a(),x(10,zt,2,2,"p",13),a()()()()}if(o&2){let r=s.$implicit,e=m(4);c(7),P(" ",r.name,"'s Goals"),c(2),P(" ",r.designation_name,""),c(),b(10,e.goalsCount?10:-1)}}function Wt(o,s){if(o&1&&(i(0,"div",3),j(1,Ut,11,3,"div",22,Me),a()),o&2){let r=m(3);c(),B(r.associateData)}}function qt(o,s){o&1&&(i(0,"div",4)(1,"div",14)(2,"h2",15)(3,"button",16)(4,"div",17)(5,"div",18)(6,"div",19),l(7," My Team "),a()()()(),C(8,"hr"),a(),i(9,"div",20)(10,"div",21),x(11,Wt,3,0,"ng-template"),a()()()()),o&2&&(c(),w("collapsed",!1))}function $t(o,s){if(o&1&&(i(0,"div",0),x(1,Bt,12,2,"div",3)(2,qt,12,1,"div",4),a()),o&2){let r=m();c(),b(1,r.associateExists?1:-1),c(),b(2,r.associateExists?2:-1)}}function Yt(o,s){if(o&1){let r=M();i(0,"span",43),u("click",function(){f(r);let t=m(2);return h(t.backToGoal())}),C(1,"i",44),a()}}function Ht(o,s){o&1&&(i(0,"span"),C(1,"i",45),a())}function Qt(o,s){if(o&1){let r=M();i(0,"div",46)(1,"button",47),u("click",function(){f(r);let t=m(2);return h(t.addGoal(t.goals))}),C(2,"i",48),l(3," Add Goal "),a()()}}function Jt(o,s){if(o&1){let r=M();i(0,"div",41)(1,"app-goals-list",49),u("deleteGoalId",function(t){f(r);let n=m(2);return h(n.deleteGoal(t))})("updatedGoalId",function(t){f(r);let n=m(2);return h(n.updateGoal(t))}),a()()}if(o&2){let r=m(2);c(),w("associateName",r.associateName)("goals",r.goals)}}function Xt(o,s){o&1&&(i(0,"div",42)(1,"div",50),C(2,"i",51),a(),i(3,"div",52),l(4," No Goal found "),a()())}function Zt(o,s){if(o&1){let r=M();i(0,"div",1)(1,"div",3)(2,"div",24),x(3,Yt,2,0,"span")(4,Ht,2,0),i(5,"h2",25),l(6),a()()(),C(7,"hr"),i(8,"div",3)(9,"div",26)(10,"div",27)(11,"input",28),A("ngModelChange",function(t){f(r);let n=m();return N(n.searchTerm,t)||(n.searchTerm=t),h(t)}),u("keyup",function(){f(r);let t=m();return h(t.search())}),a()(),i(12,"div",29)(13,"div",30)(14,"button",31),C(15,"i",32),a(),i(16,"div",33)(17,"div",34),C(18,"i",35),i(19,"button",36),u("click",function(){f(r);let t=m();return h(t.filterGoals("All"))}),l(20,"All"),a()(),i(21,"div",34),C(22,"i",37),i(23,"button",36),u("click",function(){f(r);let t=m();return h(t.filterGoals("Published"))}),l(24,"Published"),a()(),i(25,"div",34),C(26,"i",38),i(27,"button",36),u("click",function(){f(r);let t=m();return h(t.filterGoals("Draft"))}),l(28,"Draft"),a()(),i(29,"div",34),C(30,"i",39),i(31,"button",36),u("click",function(){f(r);let t=m();return h(t.filterGoals("datebetween"))}),l(32,"Date Between"),a()()()()(),x(33,Qt,4,0,"div",40),a()(),x(34,Jt,2,2,"div",41)(35,Xt,5,0,"div",42),a()}if(o&2){let r=m();c(3),b(3,r.associateExists?3:4),c(3),P(" ",r.associateName?r.associateName+"'s Goals":"Self Goals"," "),c(5),V("ngModel",r.searchTerm),c(),w("ngStyle",He(7,Rt,r.hideButton?"167px":"35")),c(21),w("ngIf",!r.hideButton),c(),b(34,r.goalListPresent?34:-1),c(),b(35,!r.goalListPresent||r.totalGoals==0?35:-1)}}var bt=(()=>{let s=class s{constructor(e,t,n,d,_,p,S,Ke,St){this.goalService=e,this.router=t,this.modalService=n,this.userConfigService=d,this.authService=_,this.sharedDataService=p,this.sharedService=S,this.notificationService=Ke,this.employeeConfig=St,this.userRole="manager",this.showList=!1,this.goalAddedSuccess=!1,this.goalDeletedSuccess=!1,this.goalType="",this.goalListPresent=!1,this.goals=[],this.deleteGoalId=-1,this.goalComments=[],this.filterStatus="",this.originalGoals=[],this.goalContent="",this.goalDate="",this.goalHeader="",this.userConfig={},this.searchTerm="",this.totalGoals=0,this.dataLoaded=!1,this.employeeIds=[],this.selfGoals=[],this.associateGoals=[],this.associateExists=!1,this.associateName="",this.alertProperties={},this.selfData={},this.associateData={},this.goalsCount=[],this.selfCount=0,this.selectedUserId=0,this.selectedUserName="",this.goalsCountLoaded=!1,this.hideButton=!1,this.filterStatus="",this.config=this.userConfigService.getConfig(),this.userConfig=this.config,this.userId=this.authService.userId(),this.userIdFromToken=this.authService.userId()}ngOnInit(){this.filterStatus,this.sharedDataService.getSharedData().subscribe(e=>{this.userData=e,this.associateName=this.userData?.associateName}),this.userData!=null?(this.renderGoalsList(this.userData?.userId,this.associateName),this.associateExists=!0):this.getEmployeeInfo(),this.userData?.userId==this.userIdFromToken||this.userData?.userId==null?this.hideButton=!1:this.hideButton=!0,this.sharedDataService.returnTo$.subscribe(e=>{this.returnToPage=e,e=="showList"&&(this.showList=!0)}),this.notificationService.notification$.subscribe(e=>{this.alertProperties=e})}ngAfterViewInit(){if(this.goalAddedSuccess||this.goalDeletedSuccess){let e=this.goalDeletedSuccess?"alert-delete":"alert-success",t=this.goalDeletedSuccess?"dustbin":"tick";this.notificationService.showNotification("Successful",`Goal ${this.goalType} successfully`,t,e)}}filterGoals(e){this.filterStatus=e,this.goals=[...this.originalGoals],this.filterStatus==="Published"?this.goals=this.goals.filter(t=>t.status.toLowerCase()==="published"):this.filterStatus==="Draft"?this.goals=this.goals.filter(t=>t.status.toLowerCase()==="draft"):this.filterStatus==="datebetween"?this.openDateRangePicker():this.filterStatus==="All"&&(this.goals=[...this.originalGoals]),this.goals.length<1?this.goalListPresent=!1:this.goalListPresent=!0}openDateRangePicker(){let e=this.modalService.open(Ct);e.componentInstance.originalGoals=this.originalGoals,e.componentInstance.dateRangeSelected.subscribe(t=>{this.filterGoalsByDate(t.start,t.end),e.close()})}filterGoalsByDate(e,t){this.filterStatus="datebetween";let n=new Date(e),d=new Date(t);this.goals=this.goals.filter(_=>{let p=new Date(_.createdOn.split("T")[0]);return p>=n&&p<=d})}getAssociates(){this.employeeIds=[],this.selfData=this.empData?.data?.employee[0],this.associateData=this.empData.data?.subordinates?.associates,this.selectedUserId=this.userId,this.employeeIds=this.associateData?.map(e=>e.user_id),this.employeeIds?.unshift(this.userId),this.associateData?.length>0?(this.showList=!1,this.renderGoalsList(this.selectedUserId,this.selectedUserName),this.associateExists=!0):(this.associateExists=!1,this.showList=!0,this.selectedUserName="",this.selectedUserId=this.selfData?.user_id,this.renderGoalsList(this.selfData?.user_id,"")),this.goalService.getGoalCount(this.employeeIds).subscribe({next:e=>{this.goalsCount=e},error:e=>{e&&e.status==403&&this.authService.navigateToLogin(!0),console.error("Error fetching goals: ",e)}})}renderGoalsList(e,t){this.associateName=t,this.goalAddedSuccess=this.sharedService.goalsAddedSuccess==="success",this.goalDeletedSuccess=this.sharedService.goalDeletedSuccess==="success",this.goalType=this.sharedService.type||this.sharedService.goalDeletedType,this.sharedService.goalsAddedSuccess=this.sharedService.type=this.sharedService.goalDeletedSuccess=this.sharedService.goalDeletedType="",this.goalType!==null&&(this.goalType=this.goalType.toLowerCase(),this.goalType=this.goalType==="draft"||this.goalType==="edited"?"saved":this.goalType==="deleted"?"deleted":"published"),this.goalSubscription=this.goalService.getGoals(e).subscribe({next:n=>{n&&n.length!==0&&(this.goalListPresent=!0,this.goals=n,this.totalGoals=this.goals.length,this.originalGoals=[...n]),n||(this.goalListPresent=!1)},error:n=>{n&&n.status==403&&this.authService.navigateToLogin(!0),console.error("Error fetching goals: ",n)}})}getFirstName(e){return e.split(" ")[0]}search(){if(!this.searchTerm.trim()){this.goals=[...this.originalGoals];return}this.goals=this.originalGoals.filter(e=>e.title.toLowerCase().includes(this.searchTerm.toLowerCase()))}addGoal(e){this.sharedDataService.setSharedData({data:e}),this.router.navigate(["/goals/addGoal"])}openModal(){this.modalService.open(_e).result.then(t=>{this.router.navigate(["/goals"])}).catch(t=>{console.log(t)})}deleteGoal(e){this.deleteGoalId=e,this.goalService.deleteGoal(this.deleteGoalId).subscribe(t=>{this.notificationService.showNotification("Successfull","Goal deleted successfully","dustbin","alert-delete"),this.renderGoalsList(this.userId,this.selectedUserName)},t=>{this.renderGoalsList(this.selectedUserId,this.selectedUserName)})}updateGoal(e){let t;this.sharedDataService.getSharedData().subscribe(n=>{t=n}),this.router.navigate(["/goals/editGoal"])}ngOnDestroy(){this.goalSubscription.unsubscribe()}loadGoals(e,t){this.associateName="",this.goals=[],this.selectedUserId=e,this.selectedUserName=t,this.renderGoalsList(e,t),this.associateName=t,e==this.userIdFromToken?this.hideButton=!1:this.hideButton=!0,this.showList=!this.showList}backToGoal(){this.showList=!1,this.getEmployeeInfo()}getGoalCounValue(e){return this.goalsCountLoaded=!0,this.goalsCount[e]}getEmployeeInfo(){this.employeeConfig.getEmployeeWithUserId().subscribe({next:e=>{this.empData=e,this.getAssociates()},error:e=>{e.status===403?console.error("Forbidden error occurred."):console.error("Error fetching emp configuration: ",e)}})}};s.\u0275fac=function(t){return new(t||s)(g(G),g(I),g(Q),g(J),g(E),g(T),g(ie),g(Ee),g(Te))},s.\u0275cmp=y({type:s,selectors:[["app-goals"]],viewQuery:function(t,n){if(t&1&&We(Kt,5),t&2){let d;qe(d=$e())&&(n.successTpl=d.first)}},standalone:!0,features:[ce([G,rt,be]),O],decls:3,vars:7,consts:[[1,"dash-container"],[1,"goal-container"],[3,"alertClass","title","message","isVisible","svgType"],[1,"row"],["ngbAccordion","",1,"accordian"],[1,"col-6","card-col",3,"click"],[1,"card"],[1,"card-body","d-flex"],[1,"col-1","user-icon"],["src","./assets/avatar.svg","alt","Icon",1,"icon"],[1,"col-10","mt-2"],[1,"card-title"],[1,"designation"],[1,"card-text"],["ngbAccordionItem","",1,"ngbAccordionItem",3,"collapsed"],["ngbAccordionHeader",""],["ngbAccordionButton","",1,"ngbAccordionButton"],[1,"row","justify-content-between"],[1,"col-12"],[1,"col-md-6","mt-3","header-team"],["ngbAccordionCollapse",""],["ngbAccordionBody",""],[1,"col-6","card-col","mt-3"],[1,"card-body","d-flex",3,"click"],[1,"col-12","d-flex"],[1,"self-goal"],[1,"util-container"],[1,"col-md-6"],["type","text","id","search_goal","placeholder","Search",1,"form-control","search",2,"background-image","url(./assets/search.svg)",3,"ngModelChange","keyup","ngModel"],[1,"col-md-4","filter-goal",3,"ngStyle"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn-filter","hide-arrow"],[1,"bi","bi-funnel"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"dropdown-menu-left"],[1,"dropdown-item"],[1,"bi","bi-check2-all"],["ngbDropdownItem","",3,"click"],[1,"bi","bi-journal-check"],[1,"bi","bi-file-earmark-minus"],[1,"bi","bi-calendar2"],["class","col-md-2 add-button",4,"ngIf"],[1,"row","app-goals-list"],[1,"row","row-margin"],[3,"click"],[1,"bi","bi-arrow-left"],[1,"bi","bi-person"],[1,"col-md-2","add-button"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bi","bi-plus-square"],[3,"deleteGoalId","updatedGoalId","associateName","goals"],[1,"no-goal-icon"],[1,"bi","bi-folder-fill"],[1,"no-goal-msg"]],template:function(t,n){t&1&&(x(0,$t,3,2,"div",0)(1,Zt,36,9,"div",1),C(2,"app-notification-alert",2)),t&2&&(b(0,n.showList?-1:0),c(),b(1,n.showList?1:-1),c(),w("alertClass",n.alertProperties.alertClass)("title",n.alertProperties.title)("message",n.alertProperties.message)("isVisible",n.alertProperties.isVisible)("svgType",n.alertProperties.svgType))},dependencies:[ht,Ze,L,Se,Qe,pt,lt,mt,dt,ct,at,st,be,H,Y,$,W,q,K,oe,z,U,ye,Ie],styles:['.goal-container[_ngcontent-%COMP%]{padding:10px 20px;background:#fff;max-width:1300px;box-shadow:0 10px 20px #ccc;height:100%}@media screen and (min-width: 768px) and (max-width: 1024px){.goal-container[_ngcontent-%COMP%]{max-width:959px}}.goal-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:20px 0 0}.app-goals-list[_ngcontent-%COMP%]{display:contents}.col-md-6[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.util-container[_ngcontent-%COMP%]{display:contents}.util-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:440px;height:48px;transition:background-color .3s ease}@media screen and (max-width: 430px){.util-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:329px;margin-left:10px}}.util-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover, .util-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background-color:#f8f9fa}.util-container[_ngcontent-%COMP%]   .filter-goal[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-left:35px}.util-container[_ngcontent-%COMP%]   .filter-goal[_ngcontent-%COMP%]   .bi-funnel[_ngcontent-%COMP%]{align-self:center;width:48px}.util-container[_ngcontent-%COMP%]   .filter-goal[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:4px;cursor:pointer;background-color:#fffaf0;border:solid 1px #fff1d6}@media screen and (max-width: 430px){.util-container[_ngcontent-%COMP%]   .filter-goal[_ngcontent-%COMP%]{margin-left:20px;margin-right:0}}@media screen and (min-width: 768px) and (max-width: 1024px){.util-container[_ngcontent-%COMP%]   .filter-goal[_ngcontent-%COMP%]{margin-left:20px}}@media screen and (min-width: 1025px) and (max-width: 1365px){.util-container[_ngcontent-%COMP%]   .filter-goal[_ngcontent-%COMP%]{margin-left:70px}}@media screen and (max-width: 430px){.util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{margin-left:20px;margin-right:0}}@media screen and (min-width: 768px) and (max-width: 1024px){.util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{margin-left:20px}}@media screen and (min-width: 1025px) and (max-width: 1365px){.util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{margin-left:70px}}.util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-left:-35px}.util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   .bi-plus-square[_ngcontent-%COMP%]{padding-right:5px}.util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:after{content:"";background:#755302;display:block;position:absolute;bottom:0;left:0;padding-top:45%;padding-left:110%;opacity:0;border-radius:5px;transition:all .4s}.util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:active:after{border-color:#ffcb56;padding:0;margin:0;opacity:1;transition:0s}.util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{position:relative;background-color:#ffcb56;border-color:#ffcb56;color:#442400;overflow:hidden}.util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:48px}@media screen and (max-width: 430px){.util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:18px;margin-left:43px;width:398px}}@media screen and (min-width: 768px) and (max-width: 1024px){.util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:-15px}}@media screen and (min-width: 1025px) and (max-width: 1365px){.util-container[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{margin-left:-70px}}.row-margin[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:281px;flex-grow:0;margin:0;border:solid 1px #dee2e6}.no-goal-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:157px;height:157px;flex-grow:0;border:solid 1px #f0f0f0;background-color:#f8f9fa;border-radius:50%;margin:0 0 -75px}.no-goal-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:5em;color:#e9ecef}.self-goal[_ngcontent-%COMP%]{margin:5px 0 0 20px;font-size:20px;font-weight:400;color:#666}.bi-arrow-left[_ngcontent-%COMP%]{font-size:x-large;cursor:pointer}.no-goal-msg[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-weight:500;color:#adb5bd}.search[_ngcontent-%COMP%]{padding:9px 4px 9px 40px;background:transparent no-repeat 13px}.dash-container[_ngcontent-%COMP%]{padding:20px;background:#fff;max-width:1300px;box-shadow:0 10px 20px #ccc;height:100%}@media screen and (min-width: 768px) and (max-width: 1024px){.dash-container[_ngcontent-%COMP%]{max-width:959px}}.dash-container[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:20px}.dash-container[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]{display:contents}.dash-container[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-left:10px}.dash-container[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:440px;height:48px;transition:background-color .3s ease}@media screen and (max-width: 430px){.dash-container[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:329px;margin-left:10px}}.dash-container[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover, .dash-container[_ngcontent-%COMP%]   .util-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background-color:#f8f9fa}.dash-container[_ngcontent-%COMP%]   .designation[_ngcontent-%COMP%]{font-size:14px;margin-top:-5px}.dash-container[_ngcontent-%COMP%]   .user-icon[_ngcontent-%COMP%]{margin-right:10px}.dash-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{height:130px;border-radius:4px;box-shadow:0 1px #f8f9fa;border:solid 1px #e7e7e7;background-color:#fff;cursor:pointer!important}.dash-container[_ngcontent-%COMP%]   .options-dot[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:18px}.dash-container[_ngcontent-%COMP%]   .header-team[_ngcontent-%COMP%]{font-size:20px;font-weight:400;color:#444;margin-bottom:-20px;width:100px}.dash-container[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{color:#444}.dash-container[_ngcontent-%COMP%]   .ngbAccordionButton[_ngcontent-%COMP%]{border:none}.dash-container[_ngcontent-%COMP%]   .ngbAccordionItem[_ngcontent-%COMP%]{border:none!important;--bs-accordion-btn-focus-box-shadow: none}.dash-container[_ngcontent-%COMP%]   .accordian[_ngcontent-%COMP%]{margin:0 -18px}.dash-container[_ngcontent-%COMP%]     button{background-color:#fff!important}.dash-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{--bs-accordion-border-color: none !important}.dash-container[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:0 20px}.dash-container[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{padding:9px 4px 9px 40px;background:transparent no-repeat 13px}.hide-arrow[_ngcontent-%COMP%]:after{display:none}.dropdown-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin:-3px 0}.dropdown-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#442400;background-color:#fffaf0}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;margin-left:0}.dropdown-menu-left[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background-color:#fffaf0}.custom-alert[_ngcontent-%COMP%]{top:20px;left:50%;transform:translate(-50%);width:25%}.bi-person[_ngcontent-%COMP%]{font-size:x-large}.accordion-body[_ngcontent-%COMP%]{margin-top:-15px}']});let o=s;return o})();var Ae=(()=>{let s=class s{constructor(e,t,n,d){this.router=e,this.modalService=t,this.sharedDataService=n,this.authService=d,this.submit=new F,this.userId=this.authService.userId()}onSubmit(){if(this.goalForm.valid){let e="Draft";this.sharedDataService.returnTo("showList"),this.submit.emit(e),this.sharedDataService.setSharedData({userId:this.userId})}else Object.keys(this.goalForm.controls).forEach(e=>{this.goalForm.get(e)?.markAsTouched()})}onCancel(){this.sharedDataService.returnTo("showList"),this.sharedDataService.setSharedData({userId:this.userId}),this.router.navigate(["/goals"])}openModal(){if(this.goalForm.valid){let e="Published",t=this.modalService.open(_e,{centered:!0});t.componentInstance.submit.subscribe(()=>{this.submit.emit(e)}),t.result.then(n=>{console.log(n)}).catch(n=>{console.log(n)})}else Object.keys(this.goalForm.controls).forEach(e=>{this.goalForm.get(e)?.markAsTouched()})}};s.\u0275fac=function(t){return new(t||s)(g(I),g(Q),g(T),g(E))},s.\u0275cmp=y({type:s,selectors:[["app-goal-footer"]],inputs:{goalForm:"goalForm"},outputs:{submit:"submit"},standalone:!0,features:[O],decls:10,vars:4,consts:[[1,"row","row-bor"],[1,"col-auto"],[1,"btn-light",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),u("click",function(){return n.onCancel()}),l(3," Cancel "),a()(),i(4,"div",1)(5,"button",3),u("click",function(){return n.onSubmit()}),l(6,"Save"),a()(),i(7,"div",1)(8,"button",4),u("click",function(){return n.openModal()}),l(9," Publish "),a()()()),t&2&&(c(5),Re("invalid-form",n.goalForm.invalid),c(3),Re("invalid-form",n.goalForm.invalid))},styles:[".btn-primary[_ngcontent-%COMP%]{background-color:#ffcb56;border-color:#ffcb56;color:#442400}button[_ngcontent-%COMP%]{height:38px;flex-grow:0;display:flex;align-items:center;gap:8px;padding:6px 12px;border-radius:4px;border:solid 1px #6c757d}.row-bor[_ngcontent-%COMP%]{width:100%;justify-content:flex-end;align-items:flex-end;position:absolute;bottom:5%;right:3%}.btn-light[_ngcontent-%COMP%]{border-radius:4px;border:solid 1px #442400;background-color:#fff0}.col-auto[_ngcontent-%COMP%]{margin:0 -7px}.invalid-form[_ngcontent-%COMP%]{opacity:.3;color:#fff!important;border-color:#626262;background-color:#626262}"]});let o=s;return o})();function ve(o,s,r,e,t){return{title:o,description:s,status:e,dueDate:en(r),isGloballyVisible:!0,kraId:t}}function en(o){return o?tn(o):""}function tn(o){let s=o.day.toString().padStart(2,"0"),r=o.month.toString().padStart(2,"0");return`${o.year.toString()}-${r}-${s}`}var Le=(()=>{let s=class s{constructor(e){this.http=e,this.authService=Z(E),this.userId=this.authService.userId()}getUserKra(){let e=nt.ACHIEVE_API_HOST+tt.GET_USER_KRA+"/"+this.userId;return this.http.get(e)}};s.\u0275fac=function(t){return new(t||s)(Ue(Xe))},s.\u0275prov=ze({token:s,factory:s.\u0275fac,providedIn:"root"});let o=s;return o})();var nn=(o,s,r)=>({year:o,month:s,day:r});function on(o,s){if(o&1){let r=M();i(0,"button",33),u("click",function(){let t=f(r).$index,n=m(2);return h(n.handleSelectKRA(t))}),l(1),a()}if(o&2){let r=s.$implicit;c(),k(r.title)}}function rn(o,s){o&1&&(i(0,"span",34),l(1,"Please select KRA*"),a())}function an(o,s){if(o&1&&(i(0,"div",32),x(1,rn,2,0,"span",34),a()),o&2){let r=m(2);c(),b(1,r.goalForm.controls.selectedKRA.errors!=null&&r.goalForm.controls.selectedKRA.errors.required?1:-1)}}function sn(o,s){if(o&1&&(i(0,"div",11)(1,"div",27)(2,"button",28),l(3),C(4,"i",29),a(),i(5,"div",30),j(6,on,2,1,"button",31,le),a(),x(8,an,2,1,"div",32),a()()),o&2){let r=m();c(3),P(" ",r.selectedKRA," "),c(3),B(r.kraList),c(2),b(8,r.goalForm.controls.selectedKRA.invalid&&(r.goalForm.controls.selectedKRA.touched||r.goalForm.controls.selectedKRA.dirty)?8:-1)}}function ln(o,s){o&1&&(i(0,"span",34),l(1,"Please enter you goal*"),a())}function cn(o,s){o&1&&(i(0,"span",34),l(1,"Minimum characters for goal summary is 5"),a())}function dn(o,s){o&1&&(i(0,"span",34),l(1,"Maximum characters for goal summary reached"),a())}function mn(o,s){if(o&1&&(i(0,"div",14),x(1,ln,2,0,"span",34)(2,cn,2,0,"span",34)(3,dn,2,0,"span",34),a()),o&2){let r=m();c(),b(1,r.goalForm.controls.summary.errors!=null&&r.goalForm.controls.summary.errors.required?1:-1),c(),b(2,r.goalForm.controls.summary.errors!=null&&r.goalForm.controls.summary.errors.minlength?2:-1),c(),b(3,r.goalForm.controls.summary.errors!=null&&r.goalForm.controls.summary.errors.maxlength?3:-1)}}function pn(o,s){o&1&&(i(0,"span",34),l(1,"Please enter you goal description*"),a())}function gn(o,s){o&1&&(i(0,"span",34),l(1,"Minimum characters for goal description is 10"),a())}function un(o,s){o&1&&(i(0,"span",34),l(1,"Maximum characters for goal description reached"),a())}function fn(o,s){if(o&1&&(i(0,"div",14),x(1,pn,2,0,"span",34)(2,gn,2,0,"span",34)(3,un,2,0,"span",34),a()),o&2){let r=m();c(),b(1,r.goalForm.controls.description.errors!=null&&r.goalForm.controls.description.errors.required?1:-1),c(),b(2,r.goalForm.controls.description.errors!=null&&r.goalForm.controls.description.errors.minlength?2:-1),c(),b(3,r.goalForm.controls.description.errors!=null&&r.goalForm.controls.description.errors.maxlength?3:-1)}}function hn(o,s){o&1&&(i(0,"span",34),l(1,"Select due date"),a())}function _n(o,s){if(o&1&&(i(0,"div",23),x(1,hn,2,0,"span",34),a()),o&2){let r=m();c(),b(1,r.goalForm.controls.dueDate.errors!=null&&r.goalForm.controls.dueDate.errors.required?1:-1)}}var vt=(()=>{let s=class s{constructor(e,t,n,d,_,p,S){this.router=e,this.dataService=t,this.goalService=n,this.kraService=d,this.userConfigService=_,this.sharedService=p,this.authService=S,this.summary="",this.description="",this.dueDate=null,this.savedType="",this.kra=[],this.selectedKRA="Select KRA",this.userConfig={},this.kraList=[],this.goalId=0,this.associateName="",this.config=this.userConfigService.getConfig(),this.userId=this.authService.userId(),this.userConfig=this.config,this.userConfig.isGoalVsKRAEnabled?this.goalForm=new me({selectedKRA:new D("",v.required),summary:new D("",[v.required,v.minLength(5),v.maxLength(150)]),description:new D("",[v.required,v.minLength(10),v.maxLength(999)]),dueDate:new D("",v.required)}):this.goalForm=new me({summary:new D("",[v.required,v.minLength(5),v.maxLength(150)]),description:new D("",[v.required,v.minLength(10),v.maxLength(999)]),dueDate:new D("",v.required)}),this.today=this.getToday()}ngOnInit(){this.kraSubscription=this.kraService.getUserKra().subscribe({next:e=>{if(e&&e.length!==0){this.kra=e.kra;for(let t in e)if(e.hasOwnProperty(t)&&t!=="length"){let n=e[t];n.isDeleted||this.kraList.push({kraId:n.kra.kraId,title:n.kra.title,userKraId:n.userKraId})}}},error:e=>{e&&e.status==403,console.error("Error fetching kra: ",e)}})}getToday(){let e=new Date;return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}backToGoal(){this.dataService.returnTo("showList"),this.dataService.setSharedData({userId:this.userId}),this.router.navigate(["/goals"])}handleSelectKRA(e){this.selectedKRA=this.kraList[e].title,this.selectedKraId=this.kraList[e].kraId,this.selectedUserKraId=this.kraList[e].userKraId,this.goalForm.patchValue({selectedKRA:this.kraList[e].title})}onSubmit(e){let t=this.selectedKRA,n=this.goalForm.value.summary,d=this.goalForm.value.description,_=this.goalForm.value.dueDate;this.savedType=e,this.postGoal(n,d,_,this.savedType,this.selectedKraId)}postGoal(e,t,n,d,_){let p=ve(e,t,n,d,_);this.goalService.postGoal(p).subscribe(S=>{console.log("Goal posted successfully:",S),this.goalId=S.goalId,this.sharedService.goalsAddedSuccess="success",this.sharedService.type=this.savedType,this.router.navigate(["/goals"])},S=>{console.error("Error posting goal:",S)})}ngOnDestroy(){this.kraSubscription.unsubscribe()}goalVsKra(){let e={userKraId:this.selectedUserKraId,goalId:this.goalId};this.goalvskraSubscription=this.goalService.goalVsKraMapping(e).subscribe({next:t=>{console.log("KRA mapped successfully")},error:t=>{t&&t.status==403,console.error("Error posting: ",t)}})}formatNgbDate(e){if(!e)return"";let t=String(e.day).padStart(2,"0"),n=String(e.month).padStart(2,"0"),d=String(e.year);return`${t}-${n}-${d}`}};s.\u0275fac=function(t){return new(t||s)(g(I),g(T),g(G),g(Le),g(J),g(ie),g(E))},s.\u0275cmp=y({type:s,selectors:[["app-add-goal"]],standalone:!0,features:[ce([G]),O],decls:35,vars:15,consts:[["d","ngbDatepicker"],[1,"card","container"],[1,"card-header"],[1,"row"],[1,"col-auto"],[1,"back-btn"],[1,"btn",3,"click"],["src","assets/back-arrow.svg","alt","back"],[1,"goal-class"],[1,"self-goal"],[1,"card-body","container","mt-2",3,"formGroup"],[1,"designation-vs-kra-container","form-group"],[1,"row","mt-3","form-group"],["type","text","placeholder","Write your goal summary*","formControlName","summary",1,"form-control","goal-summary","input-areas",3,"ngModelChange","ngModel"],[1,"text-danger","mt-2"],[1,"row","mt-4","form-group"],["type","text","placeholder","Write your goal description*","formControlName","description",1,"form-control","input-areas","goal-description",3,"ngModelChange","ngModel"],[1,"row","mt-3"],[1,"col-auto","calendarMargin"],[1,"col-12"],[1,"input-group","form-group"],["formControlName","dueDate","placeholder","DD-MM-YYYY","name","dp","ngbDatepicker","","readonly","",1,"form-control","calendar-input",3,"ngModelChange","ngModel","minDate","value"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3","calendar-input",3,"click"],[1,"text-danger","mt-2","date-danger"],[1,"col-auto","mt-2"],[1,"due-date"],[3,"submit","goalForm"],["ngbDropdown","",1,"col-12","d-inline-block"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","d-flex","form-control","justify-content-between","btn-outline-primary"],[1,"bi","bi-chevron-down"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"w-100"],["ngbDropdownItem",""],[1,"kra-danger"],["ngbDropdownItem","",3,"click"],[1,"text-danger"]],template:function(t,n){if(t&1){let d=M();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"button",6),u("click",function(){return f(d),h(n.backToGoal())}),C(6,"img",7),a()()(),i(7,"div",4)(8,"div",8)(9,"span",9),l(10,"Self Goals"),a(),i(11,"span",9),l(12,">"),a(),i(13,"span",9),l(14,"Create Your Goal"),a()()()()(),i(15,"div",10),x(16,sn,9,2,"div",11),i(17,"div",12)(18,"input",13),A("ngModelChange",function(p){return f(d),N(n.summary,p)||(n.summary=p),h(p)}),a(),x(19,mn,4,3,"div",14),a(),i(20,"div",15)(21,"input",16),A("ngModelChange",function(p){return f(d),N(n.description,p)||(n.description=p),h(p)}),a(),x(22,fn,4,3,"div",14),a(),i(23,"div",17)(24,"div",18)(25,"div",19)(26,"div",20)(27,"input",21,0),A("ngModelChange",function(p){return f(d),N(n.dueDate,p)||(n.dueDate=p),h(p)}),a(),i(29,"button",22),u("click",function(){f(d);let p=R(28);return h(p.toggle())}),a()(),x(30,_n,2,1,"div",23),a()(),i(31,"div",24)(32,"div",25),l(33," Due date "),a()()()()(),i(34,"app-goal-footer",26),u("submit",function(p){return f(d),h(n.onSubmit(p))}),a()}t&2&&(c(15),w("formGroup",n.goalForm),c(),b(16,n.userConfig.isGoalVsKRAEnabled?16:-1),c(2),V("ngModel",n.summary),c(),b(19,n.goalForm.controls.summary.invalid&&(n.goalForm.controls.summary.touched||n.goalForm.controls.summary.dirty)?19:-1),c(2),V("ngModel",n.description),c(),b(22,n.goalForm.controls.description.invalid&&(n.goalForm.controls.description.touched||n.goalForm.controls.description.dirty)?22:-1),c(5),V("ngModel",n.dueDate),w("minDate",we(11,nn,n.today.year,n.today.month,n.today.day))("value",n.formatNgbDate(n.dueDate)),c(3),b(30,n.goalForm.controls.dueDate.invalid&&(n.goalForm.controls.dueDate.touched||n.goalForm.controls.dueDate.dirty)?30:-1),c(4),w("goalForm",n.goalForm))},dependencies:[Pe,Ae,Ge,De,ke,oe,z,U,ne,K,H,Y,$,W,q,ue,pe,ge,L],styles:[".card-header[_ngcontent-%COMP%]{background-color:#fff}.card-body[_ngcontent-%COMP%]{border:none;box-shadow:none!important}.container[_ngcontent-%COMP%]{border:none;border-color:#fff;margin-left:12px;padding:20px;height:85%;box-shadow:0 5px 10px #f1f2fa;background-color:#fff}.goal-class[_ngcontent-%COMP%]{margin-top:8px;margin-left:-20px}.goal-class[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#666;font-size:24px}.back-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:29.3px}.input-areas[_ngcontent-%COMP%]{border:none;width:1052px;background-color:#f8f9fa}.input-areas[_ngcontent-%COMP%]::placeholder{position:absolute;top:10px;text-align:start;color:#cdcdcd}.goal-summary[_ngcontent-%COMP%]{height:50px;font-size:18px}.goal-description[_ngcontent-%COMP%]{height:80px;font-size:16px}.due-date[_ngcontent-%COMP%]{height:18px;padding:1px 8px;border-radius:20px;border:solid .5px #eaeaea;background-color:#f9f9f9;font-size:12px;line-height:normal;color:#9d9d9d}.designation-vs-kra-container[_ngcontent-%COMP%]{height:50px;border-radius:5px;margin-left:-11px;background-color:#f8f9fa;margin-bottom:3rem}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]{border:none;box-shadow:0 0 4px #0000004d}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{color:#212529}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#fffaf0}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{background-color:#f5f6f7!important}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;border:none;padding:15px;border-radius:5px;text-align:start;color:#442400;background-color:#fff}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background-color:#f8f9fa}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.self-goal[_ngcontent-%COMP%]{margin:5px 0 0 15px;font-size:20px;font-weight:400;color:#666}.w-100[_ngcontent-%COMP%]{width:-webkit-fill-available}.calendarMargin[_ngcontent-%COMP%]{margin-left:-10px;width:18%}.calendar-input[_ngcontent-%COMP%]{border:none;background-color:#f8f9fa}.calendar-input[_ngcontent-%COMP%]::placeholder{position:absolute;top:10px;text-align:start;color:#cdcdcd}.date-danger[_ngcontent-%COMP%]{margin-left:11px}.input-group[_ngcontent-%COMP%]{width:105%}.kra-danger[_ngcontent-%COMP%]{margin-left:10px}"]});let o=s;return o})();function Cn(o,s){if(o&1){let r=M();i(0,"div",28)(1,"h6",29),l(2,"Are you sure?"),a()(),i(3,"div",30)(4,"p"),l(5,"You want to delete the goal?"),a()(),i(6,"div",31)(7,"button",32),u("click",function(){let t=f(r).$implicit;return h(t.close("Close click"))}),l(8,"Close"),a(),i(9,"button",33),u("click",function(){f(r);let t=m();return h(t.deleteGoal(t.goalId))}),l(10,"Delete"),a()()}}function bn(o,s){if(o&1&&(i(0,"span",22),l(1),a()),o&2){let r=m();c(),P("KRA - ",r.goalKra," ")}}function xn(o,s){o&1&&(ee(0),l(1," No comments "),te())}function vn(o,s){if(o&1&&(ee(0),l(1),te()),o&2){let r=m();c(),P(" ",r.totalComments," comments ")}}function Mn(o,s){o&1&&(ee(0),l(1," 1 comment "),te())}var Mt=(()=>{let s=class s{constructor(e,t,n,d,_){this.router=e,this.goalService=t,this.sharedDataService=n,this.userConfigService=d,this.sharedService=_,this.goalComments="",this.goals=[],this.title="",this.description="",this.dueDate="",this.goalId="",this.goalKra="",this.totalComments=0,this.deleteGoalId=0,this.userConfig={},this.associateName="",this.userId=0,this.modalService=Z(Q),this.config=this.userConfigService.getConfig(),this.userConfig=this.config}ngOnInit(){this.sharedDataService.getSharedData().subscribe(e=>{this.receivedData=e}),this.populateGoalsDescription(this.receivedData)}populateGoalsDescription(e){this.userId=e.data.userId,this.associateName=e.name,this.title=e.data.title,this.description=e.data.description,this.dueDate=e.data.dueDate,this.goalId=e.data.goalId,this.totalComments=e.data.commentsList.length,e.data&&e.data.kra!==""?this.goalKra=e.data.kra.title:this.goalKra="Not Linked"}backToGoal(){this.sharedDataService.returnTo("showList"),this.sharedDataService.setSharedData({userId:this.userId,associateName:this.associateName}),this.router.navigate(["/goals"])}open(e){this.modalService.open(e)}deleteGoal(e){this.deleteGoalId=e,this.goalService.deleteGoal(this.deleteGoalId).subscribe({next:t=>{this.modalService.dismissAll(),this.sharedService.goalDeletedSuccess="success",this.sharedService.goalDeletedType="deleted",this.backToGoal()},error:t=>{console.error("Error deleting goals")}})}onNoOfCommentsChange(e){this.totalComments=e}};s.\u0275fac=function(t){return new(t||s)(g(I),g(G),g(T),g(J),g(ie))},s.\u0275cmp=y({type:s,selectors:[["app-view-goal"]],standalone:!0,features:[O],decls:47,vars:10,consts:[["content",""],[1,"card","container"],[1,"card-header"],[1,"row","justify-content-between"],[1,"col-10","d-flex"],[1,"col-1"],[1,"back-btn"],[1,"btn",3,"click"],["src","assets/back-arrow.svg","alt","back"],[1,"col-11"],[1,"view-goal"],[1,"col-2"],[1,"btn-light",3,"click"],[1,"card-body","container","mt-2"],[1,"row","mt-2","input-areas","goal-summary"],[1,"row","mt-2","input-areas","goal-description"],[1,"col-md-4","goal-date"],[1,"bi","bi-calendar2"],[1,"due-date"],[1,"due-message"],[1,"col-6","kra-comments"],[1,"col-8"],[1,"kra-name"],[1,"col-4","d-flex","col-comments"],["src","./assets/comment.svg","alt","Icon",1,"icon"],[1,"comments-count"],[1,"line-break"],[3,"noOfComments","GoalCommentsList","goalId"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(t,n){if(t&1){let d=M();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"button",7),u("click",function(){return f(d),h(n.backToGoal())}),C(7,"img",8),a()()(),i(8,"div",9)(9,"div",10),l(10),C(11,"span",10),i(12,"span",10),l(13,">"),a(),i(14,"span",10),l(15,"View Goal"),a()()()(),i(16,"div",11)(17,"button",12),u("click",function(){f(d);let p=R(20);return h(n.open(p))}),l(18," Delete Goal "),a()(),x(19,Cn,11,0,"ng-template",null,0,se),a()(),i(21,"div",13)(22,"div",14)(23,"h3"),l(24),a()(),i(25,"div",15)(26,"p"),l(27),a()(),i(28,"div",3)(29,"div",16),C(30,"i",17),i(31,"span",18),l(32),re(33,"date"),a(),i(34,"span",19),l(35,"Due Date"),a()(),i(36,"div",20)(37,"div",21),x(38,bn,2,1,"span",22),a(),i(39,"div",23),C(40,"img",24),i(41,"span",25),x(42,xn,2,0,"ng-container")(43,vn,2,1)(44,Mn,2,0),a()()()(),C(45,"div",26),i(46,"app-goal-comments",27),u("noOfComments",function(p){return f(d),h(n.onNoOfCommentsChange(p))}),a()()()}t&2&&(c(10),P(" ",n.associateName?n.associateName+"'s Goals":"Self Goals"," "),c(14),P(" ",n.title,""),c(3),k(n.description),c(5),k(ae(33,8,n.dueDate)),c(6),b(38,n.userConfig.isGoalVsKRAEnabled?38:-1),c(4),b(42,n.totalComments===0?42:n.totalComments>1?43:44),c(4),w("GoalCommentsList",n.goalComments)("goalId",n.goalId))},dependencies:[_t,L,de],styles:[".card-body[_ngcontent-%COMP%]{border:none;box-shadow:none!important}.container[_ngcontent-%COMP%]{border:none;border-color:#fff;margin-left:12px;padding:20px;box-shadow:0 5px 10px #f1f2fa;background-color:#fff}.goal-class[_ngcontent-%COMP%]{margin-top:8px;margin-left:-20px}.goal-class[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#666;font-size:24px}.back-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:29.3px}.input-areas[_ngcontent-%COMP%]{border:none;width:1023px}.goal-summary[_ngcontent-%COMP%]{height:50px;font-size:18px}.goal-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;color:#444}.goal-description[_ngcontent-%COMP%]{font-size:16px}.line-break[_ngcontent-%COMP%]{width:100%;height:1px;margin:20px 40px 15px 5px;background-color:#dee2e6}.card-header[_ngcontent-%COMP%]{background-color:#fff}.view-goal[_ngcontent-%COMP%]{margin:5px 10px 0 0;font-size:20px;font-weight:400;color:#666}.w-100[_ngcontent-%COMP%]{width:-webkit-fill-available}.goal-date[_ngcontent-%COMP%]{margin-top:10px}.goal-date[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .goal-date[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#9d9d9d;margin-right:10px}.goal-date[_ngcontent-%COMP%]   .due-date[_ngcontent-%COMP%]{color:#878787}.goal-date[_ngcontent-%COMP%]   .due-message[_ngcontent-%COMP%]{margin-left:5px;padding:2px 8px;border-radius:20px;border:solid .5px #eaeaea;background-color:#f9f9f9;font-size:12px}.kra-comments[_ngcontent-%COMP%]{margin:10px 0 0;display:flex}.kra-comments[_ngcontent-%COMP%]   .kra-name[_ngcontent-%COMP%]{padding:2px 8px;border-radius:20px;border:solid .5px #eaeaea;background-color:#f9f9f9;font-size:12px;color:#9d9d9d;float:right}.kra-comments[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 10px 0 20px}.kra-comments[_ngcontent-%COMP%]   .comments-count[_ngcontent-%COMP%]{float:inline-end;padding:2px 8px;border-radius:20px;border:solid .5px #eaeaea;background-color:#f9f9f9;font-size:12px;color:#9d9d9d}.btn-light[_ngcontent-%COMP%]{border-radius:4px;border:solid 1px #442400;background-color:#fff0;width:110px;height:38px}.btn-secondary[_ngcontent-%COMP%]{border-radius:4px;color:#442400;border:solid 1px #442400;background-color:#fff0}.btn-secondary[_ngcontent-%COMP%]:hover{color:#fff!important;background-color:#9d9d9d;border:none}.btn-outline-dark[_ngcontent-%COMP%]{border-radius:4px;color:#442400;background-color:#ffcb56;border-color:#ffcb56}"]});let o=s;return o})();var wn=(o,s,r)=>({year:o,month:s,day:r});function Sn(o,s){if(o&1){let r=M();i(0,"button",29),u("click",function(){let t=f(r).$index,n=m(2);return h(n.handleSelectKRA(t))}),l(1),a()}if(o&2){let r=s.$implicit;c(),k(r.title)}}function Pn(o,s){if(o&1&&(i(0,"div",10)(1,"div",24)(2,"button",25),l(3),C(4,"i",26),a(),i(5,"div",27),j(6,Sn,2,1,"button",28,le),a()()()),o&2){let r=m();c(3),P(" ",r.selectedKRA," "),c(3),B(r.kraList)}}function yn(o,s){o&1&&(i(0,"span",30),l(1,"Please enter you goal"),a())}function On(o,s){o&1&&(i(0,"span",30),l(1,"Minimum characters for goal title is 5"),a())}function kn(o,s){o&1&&(i(0,"span",30),l(1,"Maximum characters for goal title reached"),a())}function Dn(o,s){if(o&1&&(i(0,"div",13),x(1,yn,2,0,"span",30)(2,On,2,0,"span",30)(3,kn,2,0,"span",30),a()),o&2){let r=m();c(),b(1,r.goalForm.controls.title.errors!=null&&r.goalForm.controls.title.errors.required?1:-1),c(),b(2,r.goalForm.controls.title.errors!=null&&r.goalForm.controls.title.errors.minlength?2:-1),c(),b(3,r.goalForm.controls.title.errors!=null&&r.goalForm.controls.title.errors.maxlength?3:-1)}}function Gn(o,s){o&1&&(i(0,"span",30),l(1,"Please enter you goal description"),a())}function In(o,s){o&1&&(i(0,"span",30),l(1,"Minimum characters for goal description is 10"),a())}function En(o,s){o&1&&(i(0,"span",30),l(1,"Maximum characters for goal description reached"),a())}function Tn(o,s){if(o&1&&(i(0,"div",13),x(1,Gn,2,0,"span",30)(2,In,2,0,"span",30)(3,En,2,0,"span",30),a()),o&2){let r=m();c(),b(1,r.goalForm.controls.description.errors!=null&&r.goalForm.controls.description.errors.required?1:-1),c(),b(2,r.goalForm.controls.description.errors!=null&&r.goalForm.controls.description.errors.minlength?2:-1),c(),b(3,r.goalForm.controls.description.errors!=null&&r.goalForm.controls.description.errors.maxlength?3:-1)}}var wt=(()=>{let s=class s{constructor(e,t,n,d,_,p,S,Ke){this.router=e,this.goalService=t,this.route=n,this.ngbDateParserFormatter=d,this.sharedDataService=_,this.kraService=p,this.userConfigService=S,this.sharedService=Ke,this.goalHeading="",this.title="",this.description="",this.dueDate="",this.goalId="",this.status="",this.kra=[],this.selectedKRA="Select KRA",this.userConfig={},this.kraList=[],this.goalVsKraMapId=0,this.associateName="",this.config=this.userConfigService.getConfig(),this.userConfig=this.config,this.userConfig.isGoalVsKRAEnabled?this.goalForm=new me({selectedKRA:new D(""),title:new D("",[v.required,v.minLength(5),v.maxLength(150)]),description:new D("",[v.required,v.minLength(10),v.maxLength(999)]),dueDate:new D("",v.required)}):this.goalForm=new me({title:new D("",[v.required,v.minLength(5),v.maxLength(150)]),description:new D("",[v.required,v.minLength(10),v.maxLength(999)]),dueDate:new D("",v.required)}),this.today=this.getToday()}getToday(){let e=new Date;return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}ngOnInit(){this.sharedDataService.getSharedData().subscribe(t=>{this.receivedData=t}),this.getKraList();let e=this.route.snapshot.queryParamMap.get("editGoal");this.populateGoalsDescription(this.receivedData,e)}backToGoal(){this.sharedDataService.returnTo("showList"),this.sharedDataService.setSharedData({userId:this.receivedData?.data?.userId,associateName:this.associateName}),this.router.navigate(["/goals"])}onSubmit(e){this.status=e,(this.status==null||this.status==null)&&this.backToGoal(),this.updateGoal(this.title,this.description,this.model,this.status,this.selectedKraId)}updateGoal(e,t,n,d,_){let p;this.userConfig.isGoalVsKRAEnabled?p=ve(e,t,n,d,_):p=ve(e,t,n,d),this.goalService.updateGoals(this.goalId,p).subscribe(S=>{console.log("Goal edited successfully:",S),d=="Draft"&&(d="Edited"),this.sharedService.goalsAddedSuccess="success",this.sharedService.type=d,this.router.navigate(["/goals"],{queryParams:{goalsAddedSuccess:"success",type:d}})},S=>{console.log(S)})}populateGoalsDescription(e,t){this.title=e.data.title,this.description=e.data.description,this.dueDate=e.data.dueDate,this.goalId=e.data.goalId,this.associateName=e.name,this.model=this.convertToNgbDateStruct(this.dueDate),e.data&&e.data.kra!==""?this.selectedKRA=e.data.kra.title:this.selectedKRA="Not Linked",this.populatedKraId=e.data.kraId,this.selectedKraId=e.data.kraId}handleSelectKRA(e){this.selectedKRA=this.kraList[e].title,this.selectedKraId=this.kraList[e].kraId,this.goalForm.patchValue({selectedKRA:this.kraList[e].title})}convertToNgbDateStruct(e){if(!e)return;let t=this.ngbDateParserFormatter.parse(e);return t||void 0}getKraList(){this.kraSubscription=this.kraService.getUserKra().subscribe({next:e=>{if(e&&e.length!==0){this.kra=e.kra;for(let t in e)if(e.hasOwnProperty(t)&&t!=="length"){let n=e[t];n.isDeleted||this.kraList.push({kraId:n.kra.kraId,title:n.kra.title,userKraId:n.userKraId})}}},error:e=>{e&&e.status==403,console.error("Error fetching kra: ",e)}})}goalVsKra(){let e={userKraId:this.selectedUserKraId,goalId:this.goalId};console.log("xxxxx EDIT Payload and goalVsKraMapId :",e,"+",this.goalVsKraMapId),this.goalvskraSubscription=this.goalService.goalVsKraEditMapping(e,this.goalVsKraMapId).subscribe({next:t=>{console.log(" KRA mapped successfully")},error:t=>{t&&t.status==403,console.error("Error posting: ",t)}})}};s.\u0275fac=function(t){return new(t||s)(g(I),g(G),g(et),g(gt),g(T),g(Le),g(J),g(ie))},s.\u0275cmp=y({type:s,selectors:[["app-edit-goal"]],standalone:!0,features:[ce([G]),O],decls:32,vars:14,consts:[["d","ngbDatepicker"],[1,"card","container"],[1,"card-header"],[1,"row"],[1,"col-auto"],[1,"back-btn"],[1,"btn",3,"click"],["src","assets/back-arrow.svg","alt","back"],[1,"edit-goal"],[1,"card-body","container","mt-2",3,"formGroup"],[1,"designation-vs-kra-container","form-group"],[1,"row","mt-3","form-group"],["type","text","placeholder","Write your goal summary*","formControlName","title",1,"form-control","goal-summary","input-areas",3,"ngModelChange","ngModel"],[1,"text-danger","mt-2"],[1,"row","mt-4","form-group"],["type","text","placeholder","Write your goal description*","formControlName","description",1,"form-control","input-areas","goal-description",3,"ngModelChange","ngModel"],[1,"row","mt-3"],[1,"col-auto","calendarMargin"],[1,"input-group","form-group"],["formControlName","dueDate","placeholder","YYYY-MM-DD","name","dp","ngbDatepicker","","readonly","",1,"form-control","calendar-input",3,"ngModelChange","ngModel","minDate"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3","calendar-input",3,"click"],[1,"col-auto","mt-2"],[1,"due-date"],[3,"submit","goalForm"],["ngbDropdown","",1,"col-12","d-inline-block"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","d-flex","form-control","justify-content-between","btn-outline-primary"],[1,"bi","bi-chevron-down"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"w-100"],["ngbDropdownItem",""],["ngbDropdownItem","",3,"click"],[1,"text-danger"]],template:function(t,n){if(t&1){let d=M();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"button",6),u("click",function(){return f(d),h(n.backToGoal())}),C(6,"img",7),a()()(),i(7,"div",4)(8,"div",8),l(9),i(10,"span",8),l(11,">"),a(),i(12,"span",8),l(13,"Edit Goal"),a()()()()(),i(14,"form",9),x(15,Pn,8,1,"div",10),i(16,"div",11)(17,"input",12),A("ngModelChange",function(p){return f(d),N(n.title,p)||(n.title=p),h(p)}),a(),x(18,Dn,4,3,"div",13),a(),i(19,"div",14)(20,"input",15),A("ngModelChange",function(p){return f(d),N(n.description,p)||(n.description=p),h(p)}),a(),x(21,Tn,4,3,"div",13),a(),i(22,"div",16)(23,"div",17)(24,"div",18)(25,"input",19,0),A("ngModelChange",function(p){return f(d),N(n.model,p)||(n.model=p),h(p)}),a(),i(27,"button",20),u("click",function(){f(d);let p=R(26);return h(p.toggle())}),a()()(),i(28,"div",21)(29,"div",22),l(30," Due date "),a()()()()(),i(31,"app-goal-footer",23),u("submit",function(p){return f(d),h(n.onSubmit(p))}),a()}t&2&&(c(9),P(" ",n.associateName?n.associateName+"'s Goals":"Self Goals"," "),c(5),w("formGroup",n.goalForm),c(),b(15,n.userConfig.isGoalVsKRAEnabled?15:-1),c(2),V("ngModel",n.title),c(),b(18,n.goalForm.controls.title.invalid&&(n.goalForm.controls.title.touched||n.goalForm.controls.title.dirty)?18:-1),c(2),V("ngModel",n.description),c(),b(21,n.goalForm.controls.description.invalid&&(n.goalForm.controls.description.touched||n.goalForm.controls.description.dirty)?21:-1),c(4),V("ngModel",n.model),w("minDate",we(10,wn,n.today.year,n.today.month,n.today.day)),c(6),w("goalForm",n.goalForm))},dependencies:[Pe,Ae,Ge,De,ke,oe,Oe,z,U,ne,ue,pe,ge,L,K,H,Y,$,W,q],styles:[".card-container[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]{background-color:#fff}.card-body[_ngcontent-%COMP%]{border:none;box-shadow:none!important}.container[_ngcontent-%COMP%]{border:none;border-color:#fff;margin-left:12px;padding:20px;height:85%;box-shadow:0 5px 10px #f1f2fa;background-color:#fff}.goal-class[_ngcontent-%COMP%]{margin-top:8px;margin-left:-20px}.goal-class[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#666;font-size:24px}.back-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:29.3px}.input-areas[_ngcontent-%COMP%]{border:none;width:1052px;background-color:#f8f9fa}.input-areas[_ngcontent-%COMP%]::placeholder{position:absolute;top:10px;text-align:start;color:#cdcdcd}.goal-summary[_ngcontent-%COMP%]{height:50px;font-size:18px}.goal-description[_ngcontent-%COMP%]{height:80px;font-size:16px}.due-date[_ngcontent-%COMP%]{height:18px;padding:1px 8px;border-radius:20px;border:solid .5px #eaeaea;background-color:#f9f9f9;font-size:12px;line-height:normal;color:#9d9d9d}.edit-goal[_ngcontent-%COMP%]{margin:5px 0 0 15px;font-size:20px;font-weight:400;color:#666}.w-100[_ngcontent-%COMP%]{width:-webkit-fill-available}.calendarMargin[_ngcontent-%COMP%]{margin-left:-10px;width:18%}.calendar-input[_ngcontent-%COMP%]{border:none;background-color:#f8f9fa}.calendar-input[_ngcontent-%COMP%]::placeholder{position:absolute;top:10px;text-align:start;color:#cdcdcd}.designation-vs-kra-container[_ngcontent-%COMP%]{height:50px;border-radius:5px;margin-left:-11px;background-color:#f8f9fa;margin-bottom:3rem}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]{border:none;box-shadow:0 0 4px #0000004d}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{color:#212529}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#fffaf0}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .btn-outline-primary[_ngcontent-%COMP%]{background-color:#f5f6f7!important}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;border:none;padding:15px;border-radius:5px;text-align:start;color:#442400;background-color:#fff}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background-color:#f8f9fa}.designation-vs-kra-container[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}"]});let o=s;return o})();var fi=[{path:"",component:bt},{path:"addGoal",component:vt},{path:"viewGoal",component:Mt},{path:"editGoal",component:wt}];export{fi as GOALS_ROUTE};
