import{a as $e,b as z,c as Ke}from"./chunk-Y7DHZUM4.js";import{a as k}from"./chunk-UNSHYGIW.js";import{a as We}from"./chunk-GNIRA6UU.js";import{$ as Ve,O as De,P as Re,a as I,aa as Fe,b as be,ba as je,c as X,ca as Ue,d as Se,da as Ge,e as Pe,ea as Le,f as ye,fa as Be,g as Me,h as Oe,j as xe,k as we,m as Ie,n as G,o as L,p as Ee,q as Ne,qa as He,r as Te,s as Ae,t as M,ta as ze,u as ke,v as B,va as E,w as H,x as d}from"./chunk-3NBVBNCQ.js";import{$a as se,$b as he,Aa as ne,B as Q,Cb as P,Dc as Ce,E as D,Eb as g,Fa as ie,Fb as h,Fc as _e,Ib as de,Kc as U,Nb as fe,Ob as u,Pb as ue,Qb as A,T as q,Ta as V,Wa as p,Wb as y,X as ee,Xa as m,Xb as ge,Ya as oe,Z as x,_a as re,bb as ae,ca as R,cb as ce,da as f,ia as S,la as te,lb as w,ma as Y,n as W,nb as b,o as J,r as O,rc as ve,sa as v,sb as le,ta as C,tb as me,ub as pe,vb as F,wb as j,xb as s,yb as a,zb as l}from"./chunk-C6LWXFOC.js";var T=(()=>{let e=class e{constructor(t){this.http=t,this.permissions=[]}fetchPermissions(){let t=`${H.ACHIEVE_API_HOST}${B.GET_USER_PERMISSIONS}`;return console.log(this.http.get(t).pipe(O(n=>(this.permissions=n,this.permissions)))),this.http.get(t).pipe(O(n=>(this.permissions=n,this.permissions)))}hasViewSettingPermission(){return this.permissions.includes("VIEW_SETTINGS")}getPermissions(){return this.permissions}};e.\u0275fac=function(n){return new(n||e)(R(I))},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();var $=(o,e)=>{let i=f(d);return i.isAuthenticated()?!0:(f(G).navigate(["/login"]),i.navigateToLogin(!0),!1)},Xe=(o,e)=>{let i=f(d),t=f(k),n=i.orgId();return t.fetchConfiguration(n).pipe(O(r=>r.isGoalEnabled))},Ze=(o,e)=>{let i=f(d),t=f(k),n=i.orgId();return t.fetchConfiguration(n).pipe(O(r=>r.isKraEnabled))},Je=(o,e)=>{let i=f(T);return i.getPermissions().length>0?W(i.hasViewSettingPermission()):i.fetchPermissions().pipe(O(()=>i.hasViewSettingPermission()),D(()=>W(!1)))};var Qe=[{path:"goals",loadChildren:()=>import("./chunk-GLK4WJYM.js").then(o=>o.GOALS_ROUTE),canActivate:[$,Xe]},{path:"settings",loadChildren:()=>import("./chunk-X7SKA7EF.js").then(o=>o.SETTINGS_ROUTE),canActivate:[$,Je]},{path:"",redirectTo:"/goals",pathMatch:"full"},{path:"KRA",loadChildren:()=>import("./chunk-SELBCKPA.js").then(o=>o.KRA_ROUTE),canActivate:[$,Ze]}];var mt="@",pt=(()=>{let e=class e{constructor(t,n,r,c,_){this.doc=t,this.delegate=n,this.zone=r,this.animationType=c,this.moduleImpl=_,this._rendererFactoryPromise=null,this.scheduler=f(re,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-CS7VZ7F6.js")).catch(n=>{throw new ee(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:r})=>{this._engine=n(this.animationType,this.doc,this.scheduler);let c=new r(this.delegate,this._engine,this.zone);return this.delegate=c,c})}createRenderer(t,n){let r=this.delegate.createRenderer(t,n);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let c=new Z(r);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(_=>{let K=_.createRenderer(t,n);c.use(K)}).catch(_=>{c.use(r)}),c}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(n){oe()},e.\u0275prov=x({token:e,factory:e.\u0275fac});let o=e;return o})(),Z=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let i of this.replay)i(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,i){return this.delegate.createElement(e,i)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,i){this.delegate.appendChild(e,i)}insertBefore(e,i,t,n){this.delegate.insertBefore(e,i,t,n)}removeChild(e,i,t){this.delegate.removeChild(e,i,t)}selectRootElement(e,i){return this.delegate.selectRootElement(e,i)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,i,t,n){this.delegate.setAttribute(e,i,t,n)}removeAttribute(e,i,t){this.delegate.removeAttribute(e,i,t)}addClass(e,i){this.delegate.addClass(e,i)}removeClass(e,i){this.delegate.removeClass(e,i)}setStyle(e,i,t,n){this.delegate.setStyle(e,i,t,n)}removeStyle(e,i,t){this.delegate.removeStyle(e,i,t)}setProperty(e,i,t){this.shouldReplay(i)&&this.replay.push(n=>n.setProperty(e,i,t)),this.delegate.setProperty(e,i,t)}setValue(e,i){this.delegate.setValue(e,i)}listen(e,i,t){return this.shouldReplay(i)&&this.replay.push(n=>n.listen(e,i,t)),this.delegate.listen(e,i,t)}shouldReplay(e){return this.replay!==null&&e.startsWith(mt)}};function qe(o="animations"){return ae("NgAsyncAnimations"),te([{provide:se,useFactory:(e,i,t)=>new pt(e,i,t,o),deps:[ve,Me,ce]},{provide:ie,useValue:o==="noop"?"NoopAnimations":"BrowserAnimations"}])}var tt=(()=>{let e=class e{constructor(t){this.authService=t}intercept(t,n){let r=this.authService.getAuthToken();if(r){let c=t.clone({headers:t.headers.set("Authorization",`Bearer ${r}`).set("Content-Type","application/json")});return n.handle(c)}return n.handle(t)}};e.\u0275fac=function(n){return new(n||e)(R(d))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let o=e;return o})();var nt=(o,e)=>e(o).pipe(D(i=>([404].includes(i.status)&&console.log("Nothing found"),console.log(i.message),J(()=>i))));var it={providers:[Ne(Qe,Te()),xe(),qe("noop"),Y(ye),Y(I),X(Pe()),d,$e,Ke,X(Se([nt])),{provide:be,useClass:tt,multi:!0}]};function dt(o,e){if(o&1){let i=P();s(0,"div",17),g("click",function(){let n=v(i).$implicit,r=h(2);return C(r.navigateTo(n.id))}),s(1,"div",18)(2,"div",19),l(3,"img",20)(4,"br"),u(5),a()()()}if(o&2){let i=e.$implicit;p(3),b("src",i.imageUrl,V),p(2),A(" ",i.appName," ")}}function ft(o,e){if(o&1){let i=P();s(0,"div",3)(1,"img",4),g("click",function(){let n=v(i).$implicit;return C(n.dismiss())}),a(),s(2,"h2",5)(3,"i",6),g("click",function(){v(i);let n=h();return C(n.navigateTo())}),a(),s(4,"span",7),g("click",function(){v(i);let n=h();return C(n.navigateTo())}),u(5,"PowerHCM "),a()()(),s(6,"div",8),l(7,"hr",9),s(8,"div",10)(9,"h2",11),u(10,"Subscribed Apps"),a(),s(11,"div",12),F(12,dt,6,2,"div",13,pe),a(),s(14,"div",14)(15,"span",15),u(16,"Powered by"),a(),s(17,"span",16),u(18," Tricon Infotech"),a()()()()}if(o&2){let i=h();p(12),j(i.appsDetails)}}var ot=(()=>{let e=class e{constructor(){this.offcanvasService=f(ze),this.authService=f(d),this.closeResult="",this.appsDetails=ke}open(t){this.offcanvasService.open(t,{ariaLabelledBy:"offcanvas-basic-title"})}navigateTo(t=""){this.authService.isAuthenticated()&&this.authService.navigateToApps(t)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=S({type:e,selectors:[["app-offcanvas"]],standalone:!0,features:[y],decls:4,vars:0,consts:[["content",""],[3,"click"],["src","assets/9_dots.svg","alt","no",1,"bi","bi-grid-3x3-gap-fill","fs-2"],[1,"offcanvas-header","d-flex","justify-content-between","px-4","align-items-start","mx-2"],["src","assets/9_dots.svg","alt","no","id","offcanvas-basic-title","aria-label","Close",1,"bi","bi-grid-3x3-gap-fill","my-2",3,"click"],["aria-label","Close"],[1,"bi","bi-arrow-left","mr-1",3,"click"],[1,"fw-lighter","offcanvas-title",3,"click"],[1,"offcanvas-body","pt-0","px-4"],[1,"m-0"],[1,"flex-column","pt-4"],[1,"fw-lighter"],[1,"row"],[1,"col-6","mt-4"],[1,"mt-4"],[1,"text-secondary"],[1,"font-weight-bold"],[1,"col-6","mt-4",3,"click"],[1,"card","text-center","h-100"],[1,"card-body"],["alt","app.id",1,"m-2",3,"src"]],template:function(n,r){if(n&1){let c=P();w(0,ft,19,0,"ng-template",null,0,he),s(2,"div",1),g("click",function(){v(c);let K=fe(1);return C(r.open(K))}),l(3,"img",2),a()}},dependencies:[Ve],styles:['*[_ngcontent-%COMP%]{color:#444}.offcanvas-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.bi[_ngcontent-%COMP%], .offcanvas-title[_ngcontent-%COMP%]{cursor:pointer;margin-left:10px}.offcanvas-body[_ngcontent-%COMP%]{overflow:auto}.card-body[_ngcontent-%COMP%]{background:#ececec;border:1px solid #ececec}.fw-lighter[_ngcontent-%COMP%]{font-size:24px!important}.bi[_ngcontent-%COMP%]:before, [class^=bi-][_ngcontent-%COMP%]:before, [class*=" bi-"][_ngcontent-%COMP%]:before{vertical-align:-.25em!important}']});let o=e;return o})();function ht(o,e){if(o&1){let i=P();s(0,"div",9)(1,"button",10),l(2,"i",11),u(3),l(4,"i",12),a(),s(5,"div",13)(6,"button",14),g("click",function(){v(i);let n=h();return C(n.logout())}),l(7,"i",15),u(8,"Logout"),a()()()}if(o&2){let i=h();p(3),A(" Hi, ",i.fullName," ")}}function vt(o,e){o&1&&(s(0,"div",16),l(1,"i",17),s(2,"a",18),u(3,"Sign In"),a()())}var st=(()=>{let e=class e{constructor(t,n,r,c){this.router=t,this.authService=n,this.userConfig=r,this.empConfig=c,this.isLoggedIn=!1,this.userDetails={},this.employee={},this.fullName="",this.currentUrl=M[0].route,this.title=M[0].name,this.employee=this.empConfig.getEmployeeWithUserId().subscribe(_=>{this.fullName=_.data.employee[0].name})}ngOnInit(){this.routeObservable=this.router.events.pipe(Q(t=>t instanceof we)),this.routeSubscription=this.routeObservable.subscribe(t=>{let n=t,r=M.find(c=>c.route===n.url);this.title=r?r.name:M[0].name}),this.isLoggedIn=this.authService.isAuthenticated(),this.userDetails=this.authService.userInfo(),this.isLoggedIn&&this.userConfig.getConfig()}logout(){this.authService.logout()}ngOnDestroy(){this.routeSubscription.unsubscribe()}};e.\u0275fac=function(n){return new(n||e)(m(G),m(d),m(z),m(E))},e.\u0275cmp=S({type:e,selectors:[["app-header"]],standalone:!0,features:[y],decls:14,vars:2,consts:[[1,"header-container","d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center","gap-3"],[1,"px-3"],["src","./assets/achieve-logo.svg","alt","Icon",1,"icon"],[1,"title-container","w-100","d-flex","justify-content-center"],[1,"title"],["src","./assets/info-circle-icon.svg","alt","info"],[1,"row"],[1,"col"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","arrow"],[1,"bi","bi-person-circle","mr-2"],[1,"bi","bi-chevron-down"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"row"],["ngbDropdownItem","",3,"click"],[1,"bi","bi-box-arrow-right","mx-3"],[1,"header-signin-wrap"],[1,"bi","bi-person-circle"],["routerLink","/login",1,"nav-link"]],template:function(n,r){n&1&&(s(0,"div",0)(1,"div",1),l(2,"app-offcanvas"),s(3,"div")(4,"span",2),l(5,"img",3),a()(),s(6,"div",4)(7,"h2",5),u(8),l(9,"img",6),a()()(),s(10,"div",7)(11,"div",8),w(12,ht,9,1,"div",9)(13,vt,4,0),a()()()),n&2&&(p(8),A("",r.title," "),p(4),le(12,r.isLoggedIn?12:13))},dependencies:[L,Be,Le,Ge,Ue,Fe,je,ot,He],styles:[".header-container[_ngcontent-%COMP%]{padding:0 2rem;height:60px}.header-container[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{margin-left:4.6rem}.header-container[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#444;cursor:pointer;margin-bottom:0}.header-container[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.header-container[_ngcontent-%COMP%]   .tip-content[_ngcontent-%COMP%]{font-size:.75rem;width:15rem;text-align:start}"]});let o=e;return o})();var _t=o=>({settingsLast:o});function bt(o,e){if(o&1&&(s(0,"li",4)(1,"a",5)(2,"div",6),l(3,"img",7),s(4,"span"),u(5),a()(),l(6,"div",8),a()()),o&2){let i=e.$implicit;b("ngClass",ge(5,_t,i.name==="Settings")),p(),de("routerLink",i.route),p(2),b("src",i.imageUrl,V)("alt",i.name+" icon"),p(2),ue(i.name)}}var at=(()=>{let e=class e{constructor(t,n,r,c,_){this.userConfigService=t,this.authService=n,this.sharedService=r,this.empConfig=c,this.permissionsService=_,this.sidebarItems=M,this.openNavBar=!0,this.selectedElement="",this.userConfig={},this.hasViewSettingsPermission=!1,this.sideNavEvent=new ne,this.sharedService.getsideNavItemsVisible$().subscribe(()=>{this.initializeUserConfig()})}ngAfterViewInit(){this.initializeUserConfig()}initializeUserConfig(){try{this.userConfigService.getUserConfigWithOrgId().pipe(q(t=>(this.userConfig=t,this.permissionsService.fetchPermissions()))).subscribe(t=>{this.hasViewSettingsPermission=t?.length>0&&this.userPermissions.includes("VIEW_SETTINGS"),console.log("User Config:",this.userConfig),this.sidebarItems=M.filter(n=>n.name==="Goals"?this.userConfig.isGoalEnabled:n.name==="KRA"?this.userConfig.isKraEnabled:n.name==="Settings"?this.hasViewSettingsPermission:!0)},t=>{t.status===403?console.error("Forbidden error occurred."):console.error("Error fetching user configuration: ",t)})}catch(t){console.error("Error fetching userConfig:",t)}}handleNavBar(){this.openNavBar=!this.openNavBar,this.sideNavEvent.emit({open:this.openNavBar})}};e.\u0275fac=function(n){return new(n||e)(m(z),m(d),m(We),m(E),m(T))},e.\u0275cmp=S({type:e,selectors:[["app-side-nav"]],inputs:{userPermissions:"userPermissions"},outputs:{sideNavEvent:"sideNavEvent"},standalone:!0,features:[y],decls:6,vars:1,consts:[[1,"nav-container","d-flex","flex-column","h-100",3,"ngClass"],[1,"arrow","rounded-circle","my-2",3,"click"],[1,"bi","bi-chevron-right"],[1,"nav","nav-pills","flex-column"],[3,"ngClass"],["routerLinkActive","active",1,"nav-element","d-flex","justify-content-between","align-items-center","p-3","my-1","rounded-start",3,"routerLink"],[1,"d-inline"],[3,"src","alt"],[1,"selected","d-inline","rounded-start","h-100"]],template:function(n,r){n&1&&(s(0,"div",0)(1,"span",1),g("click",function(){return r.handleNavBar()}),l(2,"i",2),a(),s(3,"ul",3),F(4,bt,7,7,"li",4,me),a()()),n&2&&(b("ngClass",r.openNavBar?"open-nav-container":"close-nav-container"),p(4),j(r.sidebarItems))},dependencies:[Ae,L,Ee,U,Ce],styles:[".nav-container[_ngcontent-%COMP%]{background:#2a343e;transition:transform .2s ease;white-space:nowrap}.nav-container[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{margin-left:calc(100% - 16px);display:flex;align-items:center;justify-content:center;-webkit-text-stroke:2px;font-size:small;cursor:pointer;height:34px;width:32px;background-color:#fff;box-shadow:0 0 4px #0000004d;color:#442400;z-index:1}.nav-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{width:inherit;height:100%;display:block;background:#2a343e}.nav-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-element[_ngcontent-%COMP%]{position:relative;overflow:hidden}.nav-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-element[_ngcontent-%COMP%]:last-child{border-bottom:none}.nav-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-element[_ngcontent-%COMP%]:hover, .nav-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-element.active[_ngcontent-%COMP%]{background-color:#495a6b;cursor:pointer}.nav-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-element[_ngcontent-%COMP%]:hover   .selected[_ngcontent-%COMP%], .nav-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-element.active[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{position:absolute;width:5px;right:0;background:#ffcb56}.open-nav-container[_ngcontent-%COMP%]{min-width:17rem;transition-property:all;transform:translate(0)}.open-nav-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff}.open-nav-container[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{background-position:100%;transform:rotate(180deg)}.open-nav-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.open-nav-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-element[_ngcontent-%COMP%]{margin-left:.5rem;text-decoration:none;color:#fff}.close-nav-container[_ngcontent-%COMP%]{min-width:4rem;transition-property:all;transform:translate(0)}.close-nav-container[_ngcontent-%COMP%]   .sidebar-title[_ngcontent-%COMP%]{pointer-events:none;visibility:hidden;cursor:default}.close-nav-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{margin:0 10px 10px}.close-nav-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-element[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;border-radius:5px}.close-nav-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-element[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.close-nav-container[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-element[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{visibility:hidden}.settingsLast[_ngcontent-%COMP%]{width:100%;position:absolute;bottom:0}"]});let o=e;return o})();function St(o,e){if(o&1){let i=P();s(0,"app-side-nav",5),g("sideNavEvent",function(n){v(i);let r=h();return C(r.handleSideNavEvent(n))}),a()}if(o&2){let i=h();b("userPermissions",i.permissions)}}var ct=(()=>{let e=class e{constructor(t,n,r,c){this.http=t,this.empConfig=n,this.configService=r,this.permissionsService=c,this.title="achieve-ui",this.openedNavBar=!0,this.permissions=[],this.getPersmissions()}ngOnInit(){this.permissionsService.fetchPermissions().subscribe()}getPersmissions(){let t=`${H.ACHIEVE_API_HOST}${B.GET_USER_PERMISSIONS}`;this.http.get(t).subscribe(n=>{this.permissions=n||["EMPLOYEE"],this.empConfig.setPermissions(n)})}handleSideNavEvent(t){this.openedNavBar=t.open}};e.\u0275fac=function(n){return new(n||e)(m(I),m(E),m(k),m(T))},e.\u0275cmp=S({type:e,selectors:[["app-root"]],standalone:!0,features:[y],decls:6,vars:1,consts:[[1,"main-container","h-100"],[1,"d-flex","container-fluid","p-0"],[3,"userPermissions","sideNavEvent",4,"ngIf"],[1,"body-container","container-fluid"],[1,"router-content"],[3,"sideNavEvent","userPermissions"]],template:function(n,r){n&1&&(s(0,"main",0),l(1,"app-header"),s(2,"div",1),w(3,St,1,1,"app-side-nav",2),s(4,"div",3),l(5,"router-outlet",4),a()()()),n&2&&(p(3),b("ngIf",r.permissions))},dependencies:[Ie,st,at,U,_e,De,Re],styles:[".body-container[_ngcontent-%COMP%]{min-height:calc(100vh - 60px);padding:10px;overflow-x:hidden;background-color:#f8f9ff}.router-content[_ngcontent-%COMP%]{width:100%;height:100%}"]});let o=e;return o})();Oe(ct,it).catch(o=>console.error(o));
